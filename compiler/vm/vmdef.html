<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>compiler/vm/vmdef</title>
<link rel="stylesheet" type="text/css" href="../nimdoc.out.css">

<script type="text/javascript" src="../dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  if (toggleSwitch !== null) {
    toggleSwitch.addEventListener('change', switchTheme, false);
  }

  var currentTheme = localStorage.getItem('theme');
  if (!currentTheme && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    currentTheme = 'dark';
  }
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark' && toggleSwitch !== null) {
      toggleSwitch.checked = true;
    }
  }
}

window.addEventListener('DOMContentLoaded', main);
</script>

</head>
<body>
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">compiler/vm/vmdef</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple-boot">
      <li><a href="manual.html">Manual</a></li>
      <li><a href="style_guide.html">Style guide</a></li>
      <li><a href="contributing.html">Contribution guide</a></li>
      <li><a href="lib.html">Standard library</a></li>
      <li><a href="../theindex.html">Index</a></li>
      <li><a href="compiler/../theindex.html">Compiler docs</a></li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  
  <ul class="simple simple-toc" id="toc-list">
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#Atom"
    title="Atom {.union.} = object
  ptrVal*: pointer           ## akPtr
  strVal*: VmString          ## akString
  seqVal*: VmSeq             ## akSeq
  refVal*: HeapSlotHandle    ## akRef
  callableVal*: VmFunctionPtr ## akCallable
  closureVal*: VmClosure     ## akClosure
  nodeVal*: PNode            ## akPNode">Atom</a></li>
  <li><a class="reference" href="#AtomKind"
    title="AtomKind = enum
  akInt, akFloat, akPtr, akSet, akString, akSeq, akRef, akCallable, akClosure,
  akDiscriminator, akPNode, akObject, akArray">AtomKind</a></li>
  <li><a class="reference" href="#BranchListEntry"
    title="BranchListEntry = object
  case kind*: BranchListEntryKind
  of blekStart:
      field*: FieldIndex     ## The index of the corresponding discriminator
      numItems*: uint32 ## The number of items following this entry that are
                        ## part of this record-case. Used for the fast skipping
                        ## of inactive branches
      defaultBranch*: uint16 ## The index of the default branch
      numBranches*: uint16   ## The number of branches this record-case has.
                             ## Does not include branches of sub record-cases
    
  of blekBranch, blekEnd:
      fieldRange*: Slice[FieldIndex] ## 
                                     ## For 'branch' entries, the range of field indices the branch spans.
                                     ## For `end` entries, the range of fields past the corresponding
                                     ## record-case that are still part of the surrounding branch.
                                     ## 
                                     ## In both cases, the slice may be empty, with `fieldRange.a` always
                                     ## being &gt;= the previous entry's `fieldRange.a`.
                                     ## For the dedicated 'end' entry, `fieldRange.b` is always 0">BranchListEntry</a></li>
  <li><a class="reference" href="#BranchListEntryKind"
    title="BranchListEntryKind = enum
  blekStart, blekBranch, blekEnd">BranchListEntryKind</a></li>
  <li><a class="reference" href="#CallableKind"
    title="CallableKind = enum
  ckDefault,                ## A normal function
  ckCallback                 ## A VmCallback">CallableKind</a></li>
  <li><a class="reference" href="#CodeGenFlag"
    title="CodeGenFlag = enum
  cgfAllowMeta, ## If not present, type or other meta expressions are
                 ## disallowed in imperative contexts and code-gen for meta
                 ## function arguments (e.g. `typedesc`) is suppressed
  cgfCollectGlobals ## If present, the ident defs of `{.global.}` variables
                    ## are collected instead of code-gen'ed">CodeGenFlag</a></li>
  <li><a class="reference" href="#CodeGenInOut"
    title="CodeGenInOut = object
  newProcs*: seq[PSym]
  newGlobals*: seq[PSym]
  newConsts*: seq[PSym]
  nextProc*: LinkIndex
  nextGlobal*: LinkIndex
  nextConst*: LinkIndex
  globalDefs*: seq[PNode]    ## output; collected `{.global.}` definitions.
                             ## They're only collected if `cgfCollectGlobals`
                             ## is active
  flags*: set[CodeGenFlag]   ## input">CodeGenInOut</a></li>
  <li><a class="reference" href="#CodeInfo"
    title="CodeInfo = tuple[start: int, ## The position where the bytecode starts
                 regCount: int]">CodeInfo</a></li>
  <li><a class="reference" href="#ConstantId"
    title="ConstantId = int">ConstantId</a></li>
  <li><a class="reference" href="#ConstantKind"
    title="ConstantKind = enum
  cnstInt, cnstFloat, cnstString, cnstNode, ## AST, type literals
  cnstSliceListInt, cnstSliceListFloat, cnstSliceListStr">ConstantKind</a></li>
  <li><a class="reference" href="#FieldIndex"
    title="FieldIndex = distinct uint32">FieldIndex</a></li>
  <li><a class="reference" href="#FieldPosition"
    title="FieldPosition = distinct uint32">FieldPosition</a></li>
  <li><a class="reference" href="#FuncTableEntry"
    title="FuncTableEntry = object
  sym*: PSym
  retValDesc*: PVmType       ## the return value type (may be empty)
  envParamType*: PVmType     ## the type of the hidden environment parameter
  sig*: RoutineSigId
  case kind*: CallableKind
  of ckDefault:
      regCount*: uint16
      start*: int            ## the code position where the function starts
    
  of ckCallback:
      cbOffset*: int         ## the index into the callback list">FuncTableEntry</a></li>
  <li><a class="reference" href="#FunctionIndex"
    title="FunctionIndex = distinct int">FunctionIndex</a></li>
  <li><a class="reference" href="#HeapSlot"
    title="HeapSlot = object
  handle*: LocHandle
  refCount*: int">HeapSlot</a></li>
  <li><a class="reference" href="#HeapSlotHandle"
    title="HeapSlotHandle = int">HeapSlotHandle</a></li>
  <li><a class="reference" href="#IdentPattern"
    title="IdentPattern = distinct string">IdentPattern</a></li>
  <li><a class="reference" href="#LinkIndex"
    title="LinkIndex = uint32">LinkIndex</a></li>
  <li><a class="reference" href="#LocHandle"
    title="LocHandle = object
  h*: MemRegionPtr
  typ* {.cursor.}: PVmType">LocHandle</a></li>
  <li><a class="reference" href="#MemRegionPtr"
    title="MemRegionPtr = object
  p: ptr UncheckedArray[byte]
  l: int">MemRegionPtr</a></li>
  <li><a class="reference" href="#PCtx"
    title="PCtx = ref TCtx">PCtx</a></li>
  <li><a class="reference" href="#PEvalContext"
    title="PEvalContext = PCtx">PEvalContext</a></li>
  <li><a class="reference" href="#PProc"
    title="PProc = ref object
  blocks*: seq[TBlock]
  sym*: PSym
  regInfo*: seq[RegInfo]
  locals*: Table[int, int]   ## symbol-id -&gt; register index. Used for looking
                             ## up the corresponding register slot of each
                             ## local (including parameters and `result`)">PProc</a></li>
  <li><a class="reference" href="#Profiler"
    title="Profiler = object
  tEnter*: float
  sframe*: StackFrameIndex   ## The current stack frame">Profiler</a></li>
  <li><a class="reference" href="#PVmType"
    title="PVmType = ref VmType">PVmType</a></li>
  <li><a class="reference" href="#RegInfo"
    title="RegInfo = object
  refCount*: uint16
  locReg*: uint16            ## if the register stores a handle, `locReg` is the
                             ## register storing the backing location
  kind*: TSlotKind">RegInfo</a></li>
  <li><a class="reference" href="#RoutineSig"
    title="RoutineSig = distinct PType">RoutineSig</a></li>
  <li><a class="reference" href="#RoutineSigId"
    title="RoutineSigId = distinct int">RoutineSigId</a></li>
  <li><a class="reference" href="#StackFrameIndex"
    title="StackFrameIndex = int">StackFrameIndex</a></li>
  <li><a class="reference" href="#TBlock"
    title="TBlock = object
  label*: PSym
  fixups*: seq[TPosition]">TBlock</a></li>
  <li><a class="reference" href="#TCtx"
    title="TCtx = object of TPassContext
  code*: seq[TInstr]
  debug*: seq[TLineInfo]
  sframes*: seq[TStackFrame] ## The stack of the currently running code # XXX: rename to `stack`?
  globals*: seq[HeapSlotHandle] ## Stores each global's corresponding heap slot
  constants*: seq[VmConstant] ## constant data
  complexConsts*: seq[LocHandle] ## complex constants (i.e. everything that
                                 ## is not a int/float/string literal)
  typeInfoCache*: TypeInfoCache ## manages the types used by the VM
  rtti*: seq[VmTypeInfo]     ## run-time-type-information as needed by
                             ## conversion and `repr`
  functions*: seq[FuncTableEntry] ## the function table. Contains an entry
                                  ## for each procedure known to the VM. Indexed by `FunctionIndex`
  memory*: VmMemoryManager
  symToIndexTbl*: Table[int, LinkIndex] ## keeps track of all known
                                        ## dependencies. Expanded during code-generation and used for looking
                                        ## up the link-index (e.g. `FunctionIndex`) of a symbol
  codegenInOut*: CodeGenInOut ## Input and outputs to vmgen
  currentExceptionA*, currentExceptionB*: HeapSlotHandle
  exceptionInstr*: int
  prc*: PProc
  module*: PSym
  callsite*: PNode
  mode*: TEvalMode
  features*: TSandboxFlags
  traceActive*: bool
  loopIterations*: int
  comesFromHeuristic*: TLineInfo
  callbacks*: seq[VmCallback]
  callbackKeys*: seq[IdentPattern] ## The matcher patterns corresponding to
                                   ## each entry in `callbacks`. Written during VM environment setup or
                                   ## inbetween invocations. Read during code-generation.
  errorFlag*: Report
  cache*: IdentCache
  config*: ConfigRef
  graph*: ModuleGraph
  oldErrorCount*: int
  profiler*: Profiler
  templInstCounter*: ref int
  vmstateDiff*: seq[(PSym, PNode)]">TCtx</a></li>
  <li><a class="reference" href="#TDest"
    title="TDest = range[-1 .. 65535'u64.int]">TDest</a></li>
  <li><a class="reference" href="#TEvalMode"
    title="TEvalMode = enum
  emRepl,                   ## evaluate because in REPL mode
  emConst,                  ## evaluate for 'const' according to spec
  emOptimize,               ## evaluate for optimization purposes (same as
                             ## emConst?)
  emStaticExpr,             ## evaluate for enforced compile time eval
                             ## ('static' context)
  emStaticStmt,             ## 'static' as an expression
  emStandalone               ## standalone execution separate from
                             ## code-generation">TEvalMode</a></li>
  <li><a class="reference" href="#TFullReg"
    title="TFullReg = object
  case kind*: TRegisterKind
  of rkNone:
    nil
  of rkInt:
    intVal*: BiggestInt
  of rkFloat:
    floatVal*: BiggestFloat
  of rkAddress:
      addrVal*: MemRegionPtr
      addrTyp*: PVmType

  of rkLocation, rkHandle:
      handle*: LocHandle

  of rkNimNode:
      nimNode*: PNode

  of rkRegAddr:
      regAddr*: ptr TFullReg">TFullReg</a></li>
  <li><a class="reference" href="#TInstr"
    title="TInstr = distinct TInstrType">TInstr</a></li>
  <li><a class="reference" href="#TInstrType"
    title="TInstrType = uint64">TInstrType</a></li>
  <li><a class="reference" href="#TPosition"
    title="TPosition = distinct int">TPosition</a></li>
  <li><a class="reference" href="#TRegister"
    title="TRegister = range[0 .. 65535'u64.int]">TRegister</a></li>
  <li><a class="reference" href="#TSandboxFlag"
    title="TSandboxFlag = enum
  allowCast,                ## allow unsafe language feature: 'cast'
  allowInfiniteLoops         ## allow endless loops">TSandboxFlag</a></li>
  <li><a class="reference" href="#TSandboxFlags"
    title="TSandboxFlags = set[TSandboxFlag]">TSandboxFlags</a></li>
  <li><a class="reference" href="#TSlotKind"
    title="TSlotKind = enum
  slotEmpty,                ## slot is unused
  slotFixedVar,             ## slot is used for a fixed var/result (requires copy then)
  slotFixedLet,             ## slot is used for a fixed param/let
  slotTempUnknown,          ## slot but type unknown (argument of proc call)
  slotTempInt,              ## some temporary int
  slotTempFloat,            ## some temporary float
  slotTempStr,              ## some temporary string
  slotTempComplex,          ## some complex temporary (s.node field is used)
  slotTempHandle,           ## some temporary handle into an object/array
  slotTempPerm               ## slot is temporary but permanent (hack)">TSlotKind</a></li>
  <li><a class="reference" href="#TStackFrame"
    title="TStackFrame = object
  prc*: PSym
  slots*: seq[TFullReg]
  next*: StackFrameIndex
  comesFrom*: int
  safePoints*: seq[int]">TStackFrame</a></li>
  <li><a class="reference" href="#TypeInfoCache"
    title="TypeInfoCache = object
  lut*: Table[ItemId, PVmType] ## `PType`-id -&gt; `PVmType` mappings
  genericInsts*: Table[ItemId, seq[(PType, PVmType)]] ## 
                                                      ## 'generic type' -&gt; 'known instantiations' mappings. Needed to make
                                                      ## sure that all same instantations map to the same VmType
  structs*: TypeTable        ## All structural types created by ``vmtypegen``
  signatures*: Table[RoutineSig, RoutineSigId]
  nextSigId*: RoutineSigId   ## The ID to use for a new `signatures` entry
  types*: seq[PVmType]       ## all generated types (including those created
                             ## during VM setup)
  staticInfo*: array[AtomKind, tuple[size, align: uint8]] ## size and alignment information for atoms where this information is
                                                          ## the same for every instance
  boolType*: PVmType
  charType*: PVmType
  stringType*: PVmType
  pointerType*: PVmType
  nodeType*: PVmType
  emptyType*: PVmType
  intTypes*: array[tyInt .. tyInt64, PVmType]
  uintTypes*: array[tyUInt .. tyUInt64, PVmType]
  floatTypes*: array[tyFloat .. tyFloat64, PVmType]">TypeInfoCache</a></li>
  <li><a class="reference" href="#TypeTable"
    title="TypeTable = object
  data*: seq[TypeTableEntry]
  counter*: int">TypeTable</a></li>
  <li><a class="reference" href="#TypeTableEntry"
    title="TypeTableEntry = tuple[hcode: int, typ: VmTypeId]">TypeTableEntry</a></li>
  <li><a class="reference" href="#VmAllocator"
    title="VmAllocator = object
  regions*: seq[tuple[typ: PVmType, count: int, start: int, len: int]]
  byteType*: PVmType         ## The VM type for `byte`">VmAllocator</a></li>
  <li><a class="reference" href="#VmArgs"
    title="VmArgs = object
  ra*, rb*, rc*: Natural
  slots*: ptr UncheckedArray[TFullReg]
  currentException*: HeapSlotHandle
  currentLineInfo*: TLineInfo
  typeCache*: ptr TypeInfoCache
  mem*: ptr VmMemoryManager
  heap*: ptr VmHeap">VmArgs</a></li>
  <li><a class="reference" href="#VmCallback"
    title="VmCallback = proc (args: VmArgs) {.closure.}">VmCallback</a></li>
  <li><a class="reference" href="#VmClosure"
    title="VmClosure = object
  fnc*: VmFunctionPtr
  env*: HeapSlotHandle">VmClosure</a></li>
  <li><a class="reference" href="#VmConstant"
    title="VmConstant = object
  case kind*: ConstantKind
  of cnstInt:
      intVal*: BiggestInt

  of cnstFloat:
      floatVal*: BiggestFloat

  of cnstString:
      strVal*: string

  of cnstNode:
      node*: PNode

  of cnstSliceListInt:
      intSlices*: seq[Slice[BiggestInt]]

  of cnstSliceListFloat:
      floatSlices*: seq[Slice[BiggestFloat]]

  of cnstSliceListStr:
      strSlices*: seq[Slice[ConstantId]] ## Stores the ids of string constants
                                         ## as a storage optimization">VmConstant</a></li>
  <li><a class="reference" href="#VmFunctionPtr"
    title="VmFunctionPtr = distinct int">VmFunctionPtr</a></li>
  <li><a class="reference" href="#VmHeap"
    title="VmHeap = object
  slots*: seq[HeapSlot]
  pending*: seq[int]         ## the indices of the slots that are pending clean-up">VmHeap</a></li>
  <li><a class="reference" href="#VmMemoryManager"
    title="VmMemoryManager = object
  allocator*: VmAllocator
  heap*: VmHeap">VmMemoryManager</a></li>
  <li><a class="reference" href="#VmMemoryRegion"
    title="VmMemoryRegion = openArray[byte]">VmMemoryRegion</a></li>
  <li><a class="reference" href="#VmSeq"
    title="VmSeq = object
  length*: int
  data*: MemRegionPtr">VmSeq</a></li>
  <li><a class="reference" href="#VmString"
    title="VmString = distinct VmSeq">VmString</a></li>
  <li><a class="reference" href="#VmType"
    title="VmType = object
  case kind*: AtomKind
  of akInt, akFloat, akPNode:
    nil
  of akPtr, akRef:
      targetType*: PVmType

  of akSet:
      setLength*: int        ## The number of elements in the set
    
  of akSeq, akString:
      seqElemStride*: int
      seqElemType*: PVmType

  of akCallable, akClosure:
      routineSig*: RoutineSigId

  of akDiscriminator:
      numBits*: int          ## The amount of bits the discriminator value occupies
    
  of akObject:
      relFieldStart*: uint32 ## Encodes both the position (`PSym.position`) of
                             ## the first field as well as whether the object
                             ## has a base. If &gt; 0, the object has a base.
                             ## Subtracting 1 one from a `&gt; 0` value yields the
                             ## position
      objFields*: seq[tuple[offset: int, typ: PVmType]]
      branches*: seq[BranchListEntry] ## Empty if the object is no variant
    
  of akArray:
      elementCount*: int
      elementStride*: int
      elementType*: PVmType

  sizeInBytes*: uint
  alignment*: uint8          ## 1 shl `alignment` == real alignment value">VmType</a></li>
  <li><a class="reference" href="#VmTypeId"
    title="VmTypeId = uint32">VmTypeId</a></li>
  <li><a class="reference" href="#VmTypeInfo"
    title="VmTypeInfo = object
  internal*: PVmType         ## the `VmType` the type maps to
  nimType*: PType">VmTypeInfo</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#10" id="60">Consts</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#byteExcess"
    title="byteExcess = 128">byteExcess</a></li>
  <li><a class="reference" href="#nimNodeFlag"
    title="nimNodeFlag = 16">nimNodeFlag</a></li>
  <li><a class="reference" href="#noneType"
    title="noneType: PVmType = nil">noneType</a></li>
  <li><a class="reference" href="#pseudoAtomKinds"
    title="pseudoAtomKinds = {akObject, akArray}">pseudoAtomKinds</a></li>
  <li><a class="reference" href="#realAtomKinds"
    title="realAtomKinds = {akInt..akPNode}">realAtomKinds</a></li>
  <li><a class="reference" href="#regAMask"
    title="regAMask = 65535'u64">regAMask</a></li>
  <li><a class="reference" href="#regAShift"
    title="regAShift = 8'u64">regAShift</a></li>
  <li><a class="reference" href="#regBMask"
    title="regBMask = 65535'u64">regBMask</a></li>
  <li><a class="reference" href="#regBShift"
    title="regBShift = 24'u64">regBShift</a></li>
  <li><a class="reference" href="#regBxMask"
    title="regBxMask = 16777215'u64">regBxMask</a></li>
  <li><a class="reference" href="#regBxMax"
    title="regBxMax = 8388607">regBxMax</a></li>
  <li><a class="reference" href="#regBxMin"
    title="regBxMin = -8388607">regBxMin</a></li>
  <li><a class="reference" href="#regBxShift"
    title="regBxShift = 24'u64">regBxShift</a></li>
  <li><a class="reference" href="#regCMask"
    title="regCMask = 65535'u64">regCMask</a></li>
  <li><a class="reference" href="#regCShift"
    title="regCShift = 40'u64">regCShift</a></li>
  <li><a class="reference" href="#regOMask"
    title="regOMask = 255'u64">regOMask</a></li>
  <li><a class="reference" href="#regOShift"
    title="regOShift = 0'u">regOShift</a></li>
  <li><a class="reference" href="#slotSomeTemp"
    title="slotSomeTemp = slotTempUnknown">slotSomeTemp</a></li>
  <li><a class="reference" href="#wordExcess"
    title="wordExcess = 8388608">wordExcess</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section"><
      <li><a class="reference" href="#%3C%2CFieldIndex%2CFieldIndex"
    title="`&lt;`(a, b: FieldIndex): bool">`&lt;`(a, b: FieldIndex): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section"><=
      <li><a class="reference" href="#%3C%3D%2CFieldIndex%2CFieldIndex"
    title="`&lt;=`(a, b: FieldIndex): bool">`&lt;=`(a, b: FieldIndex): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">==
      <li><a class="reference" href="#%3D%3D%2CFieldIndex%2CFieldIndex"
    title="`==`(a, b: FieldIndex): bool">`==`(a, b: FieldIndex): bool</a></li>
  <li><a class="reference" href="#%3D%3D%2CFunctionIndex%2CFunctionIndex"
    title="`==`(a, b: FunctionIndex): bool">`==`(a, b: FunctionIndex): bool</a></li>
  <li><a class="reference" href="#%3D%3D%2CRoutineSigId%2CRoutineSigId"
    title="`==`(a, b: RoutineSigId): bool">`==`(a, b: RoutineSigId): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">data
      <li><a class="reference" href="#data%2CVmString"
    title="data(s: VmString): MemRegionPtr">data(s: VmString): MemRegionPtr</a></li>

  </ul>
  <ul class="simple nested-toc-section">init
      <li><a class="reference" href="#init%2CTypeInfoCache"
    title="init(cache: var TypeInfoCache)">init(cache: var TypeInfoCache)</a></li>

  </ul>
  <ul class="simple nested-toc-section">len
      <li><a class="reference" href="#len%2CVmString"
    title="len(s: VmString): int">len(s: VmString): int</a></li>

  </ul>
  <ul class="simple nested-toc-section">makeLocHandle
      <li><a class="reference" href="#makeLocHandle%2Cpointer%2CPVmType"
    title="makeLocHandle(h: pointer; typ: PVmType): LocHandle">makeLocHandle(h: pointer; typ: PVmType): LocHandle</a></li>
  <li><a class="reference" href="#makeLocHandle%2CMemRegionPtr%2CPVmType"
    title="makeLocHandle(p: MemRegionPtr; typ: PVmType): LocHandle">makeLocHandle(p: MemRegionPtr; typ: PVmType): LocHandle</a></li>

  </ul>
  <ul class="simple nested-toc-section">makeMemPtr
      <li><a class="reference" href="#makeMemPtr%2Cpointer%2Cuint"
    title="makeMemPtr(p: pointer; sizeInBytes: uint): MemRegionPtr">makeMemPtr(p: pointer; sizeInBytes: uint): MemRegionPtr</a></li>

  </ul>
  <ul class="simple nested-toc-section">newCtx
      <li><a class="reference" href="#newCtx%2CPSym%2CIdentCache%2CModuleGraph%2CIdGenerator"
    title="newCtx(module: PSym; cache: IdentCache; g: ModuleGraph; idgen: IdGenerator): PCtx">newCtx(module: PSym; cache: IdentCache; g: ModuleGraph; idgen: IdGenerator): PCtx</a></li>

  </ul>
  <ul class="simple nested-toc-section">newVmString
      <li><a class="reference" href="#newVmString%2CMemRegionPtr%2CNatural"
    title="newVmString(data: MemRegionPtr; len: Natural): VmString">newVmString(data: MemRegionPtr; len: Natural): VmString</a></li>

  </ul>
  <ul class="simple nested-toc-section">overlap
      <li><a class="reference" href="#overlap%2Cint%2Cint%2CNatural%2CNatural"
    title="overlap(a, b: int; aLen, bLen: Natural): bool">overlap(a, b: int; aLen, bLen: Natural): bool</a></li>
  <li><a class="reference" href="#overlap%2Cpointer%2Cpointer%2CNatural%2CNatural"
    title="overlap(a, b: pointer; aLen, bLen: Natural): bool">overlap(a, b: pointer; aLen, bLen: Natural): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">refresh
      <li><a class="reference" href="#refresh%2CTCtx%2CPSym%2CIdGenerator"
    title="refresh(c: var TCtx; module: PSym; idgen: IdGenerator)">refresh(c: var TCtx; module: PSym; idgen: IdGenerator)</a></li>

  </ul>
  <ul class="simple nested-toc-section">registerCallback
      <li><a class="reference" href="#registerCallback%2CTCtx%2Cstring%2CVmCallback"
    title="registerCallback(c: var TCtx; name: string; callback: VmCallback): int">registerCallback(c: var TCtx; name: string; callback: VmCallback): int</a></li>

  </ul>
  <ul class="simple nested-toc-section">safeCopyMem
      <li><a class="reference" href="#safeCopyMem%2CopenArray%5B%5D%2CopenArray%5B%5D%2CNatural"
    title="safeCopyMem(dest: var openArray[byte | char]; src: openArray[byte | char];
            numBytes: Natural)">safeCopyMem(dest: var openArray[byte | char]; src: openArray[byte | char];
            numBytes: Natural)</a></li>

  </ul>
  <ul class="simple nested-toc-section">safeCopyMemSrc
      <li><a class="reference" href="#safeCopyMemSrc%2CopenArray%5Bbyte%5D%2CopenArray%5Bbyte%5D"
    title="safeCopyMemSrc(dest: var openArray[byte]; src: openArray[byte])">safeCopyMemSrc(dest: var openArray[byte]; src: openArray[byte])</a></li>

  </ul>
  <ul class="simple nested-toc-section">safeZeroMem
      <li><a class="reference" href="#safeZeroMem%2CopenArray%5Bbyte%5D%2CNatural"
    title="safeZeroMem(dest: var openArray[byte]; numBytes: Natural)">safeZeroMem(dest: var openArray[byte]; numBytes: Natural)</a></li>

  </ul>
  <ul class="simple nested-toc-section">toFuncIndex
      <li><a class="reference" href="#toFuncIndex%2CVmFunctionPtr"
    title="toFuncIndex(x: VmFunctionPtr): FunctionIndex">toFuncIndex(x: VmFunctionPtr): FunctionIndex</a></li>

  </ul>
  <ul class="simple nested-toc-section">toFuncPtr
      <li><a class="reference" href="#toFuncPtr%2CFunctionIndex"
    title="toFuncPtr(x: FunctionIndex): VmFunctionPtr">toFuncPtr(x: FunctionIndex): VmFunctionPtr</a></li>

  </ul>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#18" id="68">Templates</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">-
      <li><a class="reference" href="#-.t%2CFieldIndex%2Cint"
    title="`-`(a: FieldIndex; b: int): FieldIndex">`-`(a: FieldIndex; b: int): FieldIndex</a></li>

  </ul>
  <ul class="simple nested-toc-section">allocator
      <li><a class="reference" href="#allocator.t%2CTCtx"
    title="allocator(c: TCtx): untyped">allocator(c: TCtx): untyped</a></li>

  </ul>
  <ul class="simple nested-toc-section">byteView
      <li><a class="reference" href="#byteView.t%2CMemRegionPtr"
    title="byteView(h: MemRegionPtr): untyped">byteView(h: MemRegionPtr): untyped</a></li>

  </ul>
  <ul class="simple nested-toc-section">fieldAt
      <li><a class="reference" href="#fieldAt.t%2CPVmType%2CFieldIndex"
    title="fieldAt(x: PVmType; i: FieldIndex): untyped">fieldAt(x: PVmType; i: FieldIndex): untyped</a></li>
  <li><a class="reference" href="#fieldAt.t%2CVmType%2CFieldIndex"
    title="fieldAt(x: VmType; i: FieldIndex): untyped">fieldAt(x: VmType; i: FieldIndex): untyped</a></li>

  </ul>
  <ul class="simple nested-toc-section">fpos
      <li><a class="reference" href="#fpos.t%2Cint"
    title="fpos(x: int): FieldPosition">fpos(x: int): FieldPosition</a></li>

  </ul>
  <ul class="simple nested-toc-section">heap
      <li><a class="reference" href="#heap.t%2CTCtx"
    title="heap(c: TCtx): untyped">heap(c: TCtx): untyped</a></li>

  </ul>
  <ul class="simple nested-toc-section">invalidLocHandle
      <li><a class="reference" href="#invalidLocHandle.t"
    title="invalidLocHandle(): untyped">invalidLocHandle(): untyped</a></li>

  </ul>
  <ul class="simple nested-toc-section">isNil
      <li><a class="reference" href="#isNil.t%2CHeapSlotHandle"
    title="isNil(h: HeapSlotHandle): bool">isNil(h: HeapSlotHandle): bool</a></li>
  <li><a class="reference" href="#isNil.t%2CMemRegionPtr"
    title="isNil(h: MemRegionPtr): bool">isNil(h: MemRegionPtr): bool</a></li>
  <li><a class="reference" href="#isNil.t%2CVmFunctionPtr"
    title="isNil(x: VmFunctionPtr): bool">isNil(x: VmFunctionPtr): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">isValid
      <li><a class="reference" href="#isValid.t%2CMemRegionPtr%2Cuint"
    title="isValid(h: MemRegionPtr; len: uint): bool">isValid(h: MemRegionPtr; len: uint): bool</a></li>
  <li><a class="reference" href="#isValid.t%2CLocHandle"
    title="isValid(handle: LocHandle): bool">isValid(handle: LocHandle): bool</a></li>
  <li><a class="reference" href="#isValid.t%2CPVmType"
    title="isValid(t: PVmType): bool">isValid(t: PVmType): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">jmpDiff
      <li><a class="reference" href="#jmpDiff.t%2CTInstr"
    title="jmpDiff(x: TInstr): int">jmpDiff(x: TInstr): int</a></li>

  </ul>
  <ul class="simple nested-toc-section">len
      <li><a class="reference" href="#len.t%2CMemRegionPtr"
    title="len(h: MemRegionPtr): untyped">len(h: MemRegionPtr): untyped</a></li>

  </ul>
  <ul class="simple nested-toc-section">nilMemPtr
      <li><a class="reference" href="#nilMemPtr.t"
    title="nilMemPtr(): untyped">nilMemPtr(): untyped</a></li>

  </ul>
  <ul class="simple nested-toc-section">opcode
      <li><a class="reference" href="#opcode.t%2CTInstr"
    title="opcode(x: TInstr): TOpcode">opcode(x: TInstr): TOpcode</a></li>

  </ul>
  <ul class="simple nested-toc-section">rawPointer
      <li><a class="reference" href="#rawPointer.t%2CMemRegionPtr"
    title="rawPointer(h: MemRegionPtr): untyped">rawPointer(h: MemRegionPtr): untyped</a></li>

  </ul>
  <ul class="simple nested-toc-section">regA
      <li><a class="reference" href="#regA.t%2CTInstr"
    title="regA(x: TInstr): TRegister">regA(x: TInstr): TRegister</a></li>

  </ul>
  <ul class="simple nested-toc-section">regB
      <li><a class="reference" href="#regB.t%2CTInstr"
    title="regB(x: TInstr): TRegister">regB(x: TInstr): TRegister</a></li>

  </ul>
  <ul class="simple nested-toc-section">regBx
      <li><a class="reference" href="#regBx.t%2CTInstr"
    title="regBx(x: TInstr): int">regBx(x: TInstr): int</a></li>

  </ul>
  <ul class="simple nested-toc-section">regC
      <li><a class="reference" href="#regC.t%2CTInstr"
    title="regC(x: TInstr): TRegister">regC(x: TInstr): TRegister</a></li>

  </ul>
  <ul class="simple nested-toc-section">registerCallback
      <li><a class="reference" href="#registerCallback.t%2CPCtx%2Cstring%2CVmCallback"
    title="registerCallback(c: PCtx; name: string; callback: VmCallback): int">registerCallback(c: PCtx; name: string; callback: VmCallback): int</a></li>

  </ul>
  <ul class="simple nested-toc-section">subView
      <li><a class="reference" href="#subView.t%2CopenArray%5BT%5D%2C%2C"
    title="subView[T](x: openArray[T]; off, len): untyped">subView[T](x: openArray[T]; off, len): untyped</a></li>

  </ul>
  <ul class="simple nested-toc-section">types
      <li><a class="reference" href="#types.t%2CTCtx"
    title="types(c: TCtx): untyped">types(c: TCtx): untyped</a></li>

  </ul>
  <ul class="simple nested-toc-section">unreachable
      <li><a class="reference" href="#unreachable.t"
    title="unreachable()">unreachable()</a></li>
  <li><a class="reference" href="#unreachable.t_2"
    title="unreachable(e: enum)">unreachable(e: enum)</a></li>
  <li><a class="reference" href="#unreachable.t%2Cstring"
    title="unreachable(msg: string)">unreachable(msg: string)</a></li>

  </ul>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#19" id="69">Exports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>

</ul>

  </div>
  &nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L1"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L1" class="link-seesrc" target="_blank" >Edit</a>

  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc">This module contains the type definitions for the new evaluation engine. An instruction is 1-3 int32s in memory, it is a register based VM.</p>
  <div class="section" id="6">
<h1><a class="toc-backref" href="#6">Imports</a></h1>
<dl class="item">
<a class="reference external" href="../ast/ast.html">../ast/ast</a>, <a class="reference external" href="../ast/idents.html">../ast/idents</a>, <a class="reference external" href="../ast/lineinfos.html">../ast/lineinfos</a>, <a class="reference external" href="../ast/reports.html">../ast/reports</a>, <a class="reference external" href="../modules/modulegraphs.html">../modules/modulegraphs</a>, <a class="reference external" href="../front/options.html">../front/options</a>, <a class="reference external" href="../utils/debugutils.html">../utils/debugutils</a>, <a class="reference external" href="vm_enums.html">vm_enums</a>
</dl></div>
<div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<div id="Atom">
<dt><pre><a href="vmdef.html#Atom"><span class="Identifier">Atom</span></a> {.<span class="Identifier">union</span>.} <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">ptrVal</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">pointer</span>           <span class="Comment">## akPtr</span>
  <span class="Identifier">strVal</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#VmString"><span class="Identifier">VmString</span></a>          <span class="Comment">## akString</span>
  <span class="Identifier">seqVal</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#VmSeq"><span class="Identifier">VmSeq</span></a>             <span class="Comment">## akSeq</span>
  <span class="Identifier">refVal</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#HeapSlotHandle"><span class="Identifier">HeapSlotHandle</span></a>    <span class="Comment">## akRef</span>
  <span class="Identifier">callableVal</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#VmFunctionPtr"><span class="Identifier">VmFunctionPtr</span></a> <span class="Comment">## akCallable</span>
  <span class="Identifier">closureVal</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#VmClosure"><span class="Identifier">VmClosure</span></a>     <span class="Comment">## akClosure</span>
  <span class="Identifier">nodeVal</span><span class="Operator">*</span><span class="Other">:</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a>            <span class="Comment">## akPNode</span>
  </pre></dt>
<dd>

Convenience type to make working with atomic locations easier. Since the union stores gc'ed memory (PNode), it must never be used on either side of an assignment and also never used as a variable's type
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L290"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L290" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="AtomKind">
<dt><pre><a href="vmdef.html#AtomKind"><span class="Identifier">AtomKind</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">akInt</span><span class="Other">,</span> <span class="Identifier">akFloat</span><span class="Other">,</span> <span class="Identifier">akPtr</span><span class="Other">,</span> <span class="Identifier">akSet</span><span class="Other">,</span> <span class="Identifier">akString</span><span class="Other">,</span> <span class="Identifier">akSeq</span><span class="Other">,</span> <span class="Identifier">akRef</span><span class="Other">,</span> <span class="Identifier">akCallable</span><span class="Other">,</span> <span class="Identifier">akClosure</span><span class="Other">,</span>
  <span class="Identifier">akDiscriminator</span><span class="Other">,</span> <span class="Identifier">akPNode</span><span class="Other">,</span> <span class="Identifier">akObject</span><span class="Other">,</span> <span class="Identifier">akArray</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L112"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L112" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="BranchListEntry">
<dt><pre><a href="vmdef.html#BranchListEntry"><span class="Identifier">BranchListEntry</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Keyword">case</span> <span class="Identifier">kind</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#BranchListEntryKind"><span class="Identifier">BranchListEntryKind</span></a>
  <span class="Keyword">of</span> <span class="Identifier">blekStart</span><span class="Other">:</span>
      <span class="Identifier">field</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#FieldIndex"><span class="Identifier">FieldIndex</span></a>     <span class="Comment">## The index of the corresponding discriminator</span>
      <span class="Identifier">numItems</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">uint32</span> <span class="Comment">## The number of items following this entry that are</span>
                        <span class="Comment">## part of this record-case. Used for the fast skipping</span>
                        <span class="Comment">## of inactive branches</span>
      <span class="Identifier">defaultBranch</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">uint16</span> <span class="Comment">## The index of the default branch</span>
      <span class="Identifier">numBranches</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">uint16</span>   <span class="Comment">## The number of branches this record-case has.</span>
                             <span class="Comment">## Does not include branches of sub record-cases</span>
    
  <span class="Keyword">of</span> <span class="Identifier">blekBranch</span><span class="Other">,</span> <span class="Identifier">blekEnd</span><span class="Other">:</span>
      <span class="Identifier">fieldRange</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">Slice</span><span class="Other">[</span><a href="vmdef.html#FieldIndex"><span class="Identifier">FieldIndex</span></a><span class="Other">]</span> <span class="Comment">## </span>
                                     <span class="Comment">## For 'branch' entries, the range of field indices the branch spans.</span>
                                     <span class="Comment">## For `end` entries, the range of fields past the corresponding</span>
                                     <span class="Comment">## record-case that are still part of the surrounding branch.</span>
                                     <span class="Comment">## </span>
                                     <span class="Comment">## In both cases, the slice may be empty, with `fieldRange.a` always</span>
                                     <span class="Comment">## being &gt;= the previous entry's `fieldRange.a`.</span>
                                     <span class="Comment">## For the dedicated 'end' entry, `fieldRange.b` is always 0</span>
    
  </pre></dt>
<dd>

An entry in a walk-list, describing an object variant in a flat manner. A record-case maps to the following entries:<ul class="simple"><li>a 'start' entry (represents the discriminator)</li>
<li>one or more 'branch' entries (one for each <tt class="docutils literal"><span class="pre"><span class="Keyword">of</span></span></tt>-branch)</li>
<li>an 'end' entry</li>
</ul>
<p>If a branch contains a sub record-case, the record-case's entries follow the entry of the surrounding branch (i.e. the layout is stored depth-first). The first entry in the list is always a 'branch' (called the master branch) enclosing all fields in the object. The last entry is always a dedicated 'end' entry.</p>
<p>The idea behind this way of representing the layout of a variant object, is to allow for fast linear traversal of active fields without the need for recursion or auxiliary stack-like data structures</p>

&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L152"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L152" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="BranchListEntryKind">
<dt><pre><a href="vmdef.html#BranchListEntryKind"><span class="Identifier">BranchListEntryKind</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">blekStart</span><span class="Other">,</span> <span class="Identifier">blekBranch</span><span class="Other">,</span> <span class="Identifier">blekEnd</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L147"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L147" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="CallableKind">
<dt><pre><a href="vmdef.html#CallableKind"><span class="Identifier">CallableKind</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">ckDefault</span><span class="Other">,</span>                <span class="Comment">## A normal function</span>
  <span class="Identifier">ckCallback</span>                 <span class="Comment">## A VmCallback</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L245"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L245" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="CodeGenFlag">
<dt><pre><a href="vmdef.html#CodeGenFlag"><span class="Identifier">CodeGenFlag</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">cgfAllowMeta</span><span class="Other">,</span> <span class="Comment">## If not present, type or other meta expressions are</span>
                 <span class="Comment">## disallowed in imperative contexts and code-gen for meta</span>
                 <span class="Comment">## function arguments (e.g. `typedesc`) is suppressed</span>
  <span class="Identifier">cgfCollectGlobals</span> <span class="Comment">## If present, the ident defs of `{.global.}` variables</span>
                    <span class="Comment">## are collected instead of code-gen'ed</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L491"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L491" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="CodeGenInOut">
<dt><pre><a href="vmdef.html#CodeGenInOut"><span class="Identifier">CodeGenInOut</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">newProcs</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a><span class="Other">]</span>
  <span class="Identifier">newGlobals</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a><span class="Other">]</span>
  <span class="Identifier">newConsts</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a><span class="Other">]</span>
  <span class="Identifier">nextProc</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#LinkIndex"><span class="Identifier">LinkIndex</span></a>
  <span class="Identifier">nextGlobal</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#LinkIndex"><span class="Identifier">LinkIndex</span></a>
  <span class="Identifier">nextConst</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#LinkIndex"><span class="Identifier">LinkIndex</span></a>
  <span class="Identifier">globalDefs</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a><span class="Other">]</span>    <span class="Comment">## output; collected `{.global.}` definitions.</span>
                             <span class="Comment">## They're only collected if `cgfCollectGlobals`</span>
                             <span class="Comment">## is active</span>
  <span class="Identifier">flags</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">set</span><span class="Other">[</span><a href="vmdef.html#CodeGenFlag"><span class="Identifier">CodeGenFlag</span></a><span class="Other">]</span>   <span class="Comment">## input</span>
  </pre></dt>
<dd>

<p>Mutable global state for the code-generator (<tt class="docutils literal"><span class="pre"><span class="Identifier">vmgen</span></span></tt>) that is not directly related to the code being generated.</p>
<p>The <tt class="docutils literal"><span class="pre"><span class="Identifier">newX</span></span></tt> seqs accumulate the symbols added to <tt class="docutils literal"><span class="pre"><span class="Identifier">symToIndexTbl</span></span></tt> during code-gen, with a seq for each link-item kind. They're never reset by <tt class="docutils literal"><span class="pre"><span class="Identifier">vmgen</span></span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre"><span class="Identifier">nextX</span></span></tt> values hold the <tt class="docutils literal"><span class="pre"><span class="Identifier">LinkIndex</span></span></tt> to use for new entries added to <tt class="docutils literal"><span class="pre"><span class="Identifier">symToIndexTbl</span></span></tt>. They're incremented after a respective new entry is added.</p>

&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L502"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L502" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="CodeInfo">
<dt><pre><a href="vmdef.html#CodeInfo"><span class="Identifier">CodeInfo</span></a> <span class="Other">=</span> <span class="Keyword">tuple</span><span class="Other">[</span><span class="Identifier">start</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">,</span> <span class="Comment">## The position where the bytecode starts</span>
                 <span class="Identifier">regCount</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">]</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L108"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L108" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="ConstantId">
<dt><pre><a href="vmdef.html#ConstantId"><span class="Identifier">ConstantId</span></a> <span class="Other">=</span> <span class="Identifier">int</span></pre></dt>
<dd>

The ID of a <tt class="docutils literal"><span class="pre"><span class="Identifier">VmConstant</span></span></tt>. Currently just an index into <tt class="docutils literal"><span class="pre"><span class="Identifier">PCtx</span><span class="Operator">.</span><span class="Identifier">constants</span></span></tt>
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L351"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L351" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="ConstantKind">
<dt><pre><a href="vmdef.html#ConstantKind"><span class="Identifier">ConstantKind</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">cnstInt</span><span class="Other">,</span> <span class="Identifier">cnstFloat</span><span class="Other">,</span> <span class="Identifier">cnstString</span><span class="Other">,</span> <span class="Identifier">cnstNode</span><span class="Other">,</span> <span class="Comment">## AST, type literals</span>
  <span class="Identifier">cnstSliceListInt</span><span class="Other">,</span> <span class="Identifier">cnstSliceListFloat</span><span class="Other">,</span> <span class="Identifier">cnstSliceListStr</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L340"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L340" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="FieldIndex">
<dt><pre><a href="vmdef.html#FieldIndex"><span class="Identifier">FieldIndex</span></a> <span class="Other">=</span> <span class="Keyword">distinct</span> <span class="Identifier">uint32</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L145"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L145" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="FieldPosition">
<dt><pre><a href="vmdef.html#FieldPosition"><span class="Identifier">FieldPosition</span></a> <span class="Other">=</span> <span class="Keyword">distinct</span> <span class="Identifier">uint32</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L144"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L144" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="FuncTableEntry">
<dt><pre><a href="vmdef.html#FuncTableEntry"><span class="Identifier">FuncTableEntry</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">sym</span><span class="Operator">*</span><span class="Other">:</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a>
  <span class="Identifier">retValDesc</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a>       <span class="Comment">## the return value type (may be empty)</span>
  <span class="Identifier">envParamType</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a>     <span class="Comment">## the type of the hidden environment parameter</span>
  <span class="Identifier">sig</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#RoutineSigId"><span class="Identifier">RoutineSigId</span></a>
  <span class="Keyword">case</span> <span class="Identifier">kind</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#CallableKind"><span class="Identifier">CallableKind</span></a>
  <span class="Keyword">of</span> <span class="Identifier">ckDefault</span><span class="Other">:</span>
      <span class="Identifier">regCount</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">uint16</span>
      <span class="Identifier">start</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>            <span class="Comment">## the code position where the function starts</span>
    
  <span class="Keyword">of</span> <span class="Identifier">ckCallback</span><span class="Other">:</span>
      <span class="Identifier">cbOffset</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>         <span class="Comment">## the index into the callback list</span>
    
  </pre></dt>
<dd>

A function table entry. Stores all information necessary to call the corresponding procedure
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L251"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L251" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="FunctionIndex">
<dt><pre><a href="vmdef.html#FunctionIndex"><span class="Identifier">FunctionIndex</span></a> <span class="Other">=</span> <span class="Keyword">distinct</span> <span class="Identifier">int</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L475"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L475" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="HeapSlot">
<dt><pre><a href="vmdef.html#HeapSlot"><span class="Identifier">HeapSlot</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">handle</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#LocHandle"><span class="Identifier">LocHandle</span></a>
  <span class="Identifier">refCount</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L324"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L324" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="HeapSlotHandle">
<dt><pre><a href="vmdef.html#HeapSlotHandle"><span class="Identifier">HeapSlotHandle</span></a> <span class="Other">=</span> <span class="Identifier">int</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L322"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L322" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="IdentPattern">
<dt><pre><a href="vmdef.html#IdentPattern"><span class="Identifier">IdentPattern</span></a> <span class="Other">=</span> <span class="Keyword">distinct</span> <span class="Identifier">string</span></pre></dt>
<dd>

A matcher pattern for a fully qualified symbol identifier
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L408"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L408" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="LinkIndex">
<dt><pre><a href="vmdef.html#LinkIndex"><span class="Identifier">LinkIndex</span></a> <span class="Other">=</span> <span class="Identifier">uint32</span></pre></dt>
<dd>

Depending on the context: <tt class="docutils literal"><span class="pre"><span class="Identifier">FunctionIndex</span></span></tt>; index into <tt class="docutils literal"><span class="pre"><span class="Identifier">TCtx</span><span class="Operator">.</span><span class="Identifier">globals</span></span></tt>; index into <tt class="docutils literal"><span class="pre"><span class="Identifier">TCtx</span><span class="Operator">.</span><span class="Identifier">complexConsts</span></span></tt>
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L498"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L498" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="LocHandle">
<dt><pre><a href="vmdef.html#LocHandle"><span class="Identifier">LocHandle</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">h</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#MemRegionPtr"><span class="Identifier">MemRegionPtr</span></a>
  <span class="Identifier">typ</span><span class="Operator">*</span> {.<span class="Identifier">cursor</span>.}<span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a>
</pre></dt>
<dd>

A handle to a <tt class="docutils literal"><span class="pre">location</span></tt>
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L279"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L279" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="MemRegionPtr">
<dt><pre><a href="vmdef.html#MemRegionPtr"><span class="Identifier">MemRegionPtr</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">p</span><span class="Other">:</span> <span class="Keyword">ptr</span> <span class="Identifier">UncheckedArray</span><span class="Other">[</span><span class="Identifier">byte</span><span class="Other">]</span>
  <span class="Identifier">l</span><span class="Other">:</span> <span class="Identifier">int</span>
</pre></dt>
<dd>

A pointer to a region of memory
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L273"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L273" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="PCtx">
<dt><pre><a href="vmdef.html#PCtx"><span class="Identifier">PCtx</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <a href="vmdef.html#TCtx"><span class="Identifier">TCtx</span></a></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L527"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L527" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="PEvalContext">
<dt><pre><a href="vmdef.html#PEvalContext"><span class="Identifier">PEvalContext</span></a> <span class="Other">=</span> <a href="vmdef.html#PCtx"><span class="Identifier">PCtx</span></a></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L601"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L601" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="PProc">
<dt><pre><a href="vmdef.html#PProc"><span class="Identifier">PProc</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <span class="Keyword">object</span>
  <span class="Identifier">blocks</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#TBlock"><span class="Identifier">TBlock</span></a><span class="Other">]</span>
  <span class="Identifier">sym</span><span class="Operator">*</span><span class="Other">:</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a>
  <span class="Identifier">regInfo</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#RegInfo"><span class="Identifier">RegInfo</span></a><span class="Other">]</span>
  <span class="Identifier">locals</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">Table</span><span class="Other">[</span><span class="Identifier">int</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span>   <span class="Comment">## symbol-id -&gt; register index. Used for looking</span>
                             <span class="Comment">## up the corresponding register slot of each</span>
                             <span class="Comment">## local (including parameters and `result`)</span>
  </pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L385"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L385" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="Profiler">
<dt><pre><a href="vmdef.html#Profiler"><span class="Identifier">Profiler</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">tEnter</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">float</span>
  <span class="Identifier">sframe</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#StackFrameIndex"><span class="Identifier">StackFrameIndex</span></a>   <span class="Comment">## The current stack frame</span>
  </pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L595"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L595" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="PVmType">
<dt><pre><a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <a href="vmdef.html#VmType"><span class="Identifier">VmType</span></a></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L139"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L139" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="RegInfo">
<dt><pre><a href="vmdef.html#RegInfo"><span class="Identifier">RegInfo</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">refCount</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">uint16</span>
  <span class="Identifier">locReg</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">uint16</span>            <span class="Comment">## if the register stores a handle, `locReg` is the</span>
                             <span class="Comment">## register storing the backing location</span>
  <span class="Identifier">kind</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#TSlotKind"><span class="Identifier">TSlotKind</span></a>
</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L379"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L379" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="RoutineSig">
<dt><pre><a href="vmdef.html#RoutineSig"><span class="Identifier">RoutineSig</span></a> <span class="Other">=</span> <span class="Keyword">distinct</span> <a href="../ast/ast_types.html#PType"><span class="Identifier">PType</span></a></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L432"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L432" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="RoutineSigId">
<dt><pre><a href="vmdef.html#RoutineSigId"><span class="Identifier">RoutineSigId</span></a> <span class="Other">=</span> <span class="Keyword">distinct</span> <span class="Identifier">int</span></pre></dt>
<dd>

Routine signature ID. Each different routine (proc, func, etc.) signature gets mapped to a unique ID.
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L427"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L427" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="StackFrameIndex">
<dt><pre><a href="vmdef.html#StackFrameIndex"><span class="Identifier">StackFrameIndex</span></a> <span class="Other">=</span> <span class="Identifier">int</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L584"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L584" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TBlock">
<dt><pre><a href="vmdef.html#TBlock"><span class="Identifier">TBlock</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">label</span><span class="Operator">*</span><span class="Other">:</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a>
  <span class="Identifier">fixups</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#TPosition"><span class="Identifier">TPosition</span></a><span class="Other">]</span>
</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L73"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L73" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TCtx">
<dt><pre><a href="vmdef.html#TCtx"><span class="Identifier">TCtx</span></a> <span class="Other">=</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <a href="../modules/modulegraphs.html#TPassContext"><span class="Identifier">TPassContext</span></a>
  <span class="Identifier">code</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#TInstr"><span class="Identifier">TInstr</span></a><span class="Other">]</span>
  <span class="Identifier">debug</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="../ast/ast_types.html#TLineInfo"><span class="Identifier">TLineInfo</span></a><span class="Other">]</span>
  <span class="Identifier">sframes</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#TStackFrame"><span class="Identifier">TStackFrame</span></a><span class="Other">]</span> <span class="Comment">## The stack of the currently running code # XXX: rename to `stack`?</span>
  <span class="Identifier">globals</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#HeapSlotHandle"><span class="Identifier">HeapSlotHandle</span></a><span class="Other">]</span> <span class="Comment">## Stores each global's corresponding heap slot</span>
  <span class="Identifier">constants</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#VmConstant"><span class="Identifier">VmConstant</span></a><span class="Other">]</span> <span class="Comment">## constant data</span>
  <span class="Identifier">complexConsts</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#LocHandle"><span class="Identifier">LocHandle</span></a><span class="Other">]</span> <span class="Comment">## complex constants (i.e. everything that</span>
                                 <span class="Comment">## is not a int/float/string literal)</span>
  <span class="Identifier">typeInfoCache</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#TypeInfoCache"><span class="Identifier">TypeInfoCache</span></a> <span class="Comment">## manages the types used by the VM</span>
  <span class="Identifier">rtti</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#VmTypeInfo"><span class="Identifier">VmTypeInfo</span></a><span class="Other">]</span>     <span class="Comment">## run-time-type-information as needed by</span>
                             <span class="Comment">## conversion and `repr`</span>
  <span class="Identifier">functions</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#FuncTableEntry"><span class="Identifier">FuncTableEntry</span></a><span class="Other">]</span> <span class="Comment">## the function table. Contains an entry</span>
                                  <span class="Comment">## for each procedure known to the VM. Indexed by `FunctionIndex`</span>
  <span class="Identifier">memory</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#VmMemoryManager"><span class="Identifier">VmMemoryManager</span></a>
  <span class="Identifier">symToIndexTbl</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">Table</span><span class="Other">[</span><span class="Identifier">int</span><span class="Other">,</span> <a href="vmdef.html#LinkIndex"><span class="Identifier">LinkIndex</span></a><span class="Other">]</span> <span class="Comment">## keeps track of all known</span>
                                        <span class="Comment">## dependencies. Expanded during code-generation and used for looking</span>
                                        <span class="Comment">## up the link-index (e.g. `FunctionIndex`) of a symbol</span>
  <span class="Identifier">codegenInOut</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#CodeGenInOut"><span class="Identifier">CodeGenInOut</span></a> <span class="Comment">## Input and outputs to vmgen</span>
  <span class="Identifier">currentExceptionA</span><span class="Operator">*</span><span class="Other">,</span> <span class="Identifier">currentExceptionB</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#HeapSlotHandle"><span class="Identifier">HeapSlotHandle</span></a>
  <span class="Identifier">exceptionInstr</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">prc</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#PProc"><span class="Identifier">PProc</span></a>
  <span class="Identifier">module</span><span class="Operator">*</span><span class="Other">:</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a>
  <span class="Identifier">callsite</span><span class="Operator">*</span><span class="Other">:</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a>
  <span class="Identifier">mode</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#TEvalMode"><span class="Identifier">TEvalMode</span></a>
  <span class="Identifier">features</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#TSandboxFlags"><span class="Identifier">TSandboxFlags</span></a>
  <span class="Identifier">traceActive</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">bool</span>
  <span class="Identifier">loopIterations</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">comesFromHeuristic</span><span class="Operator">*</span><span class="Other">:</span> <a href="../ast/ast_types.html#TLineInfo"><span class="Identifier">TLineInfo</span></a>
  <span class="Identifier">callbacks</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#VmCallback"><span class="Identifier">VmCallback</span></a><span class="Other">]</span>
  <span class="Identifier">callbackKeys</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#IdentPattern"><span class="Identifier">IdentPattern</span></a><span class="Other">]</span> <span class="Comment">## The matcher patterns corresponding to</span>
                                   <span class="Comment">## each entry in `callbacks`. Written during VM environment setup or</span>
                                   <span class="Comment">## inbetween invocations. Read during code-generation.</span>
  <span class="Identifier">errorFlag</span><span class="Operator">*</span><span class="Other">:</span> <a href="../ast/reports.html#Report"><span class="Identifier">Report</span></a>
  <span class="Identifier">cache</span><span class="Operator">*</span><span class="Other">:</span> <a href="../ast/idents.html#IdentCache"><span class="Identifier">IdentCache</span></a>
  <span class="Identifier">config</span><span class="Operator">*</span><span class="Other">:</span> <a href="../front/options.html#ConfigRef"><span class="Identifier">ConfigRef</span></a>
  <span class="Identifier">graph</span><span class="Operator">*</span><span class="Other">:</span> <a href="../modules/modulegraphs.html#ModuleGraph"><span class="Identifier">ModuleGraph</span></a>
  <span class="Identifier">oldErrorCount</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">profiler</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#Profiler"><span class="Identifier">Profiler</span></a>
  <span class="Identifier">templInstCounter</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">ref</span> <span class="Identifier">int</span>
  <span class="Identifier">vmstateDiff</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Other">(</span><a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a><span class="Other">,</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a><span class="Other">)</span><span class="Other">]</span>
</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L528"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L528" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TDest">
<dt><pre><a href="vmdef.html#TDest"><span class="Identifier">TDest</span></a> <span class="Other">=</span> <span class="Identifier">range</span><span class="Other">[</span><span class="DecNumber">-1</span> <span class="Operator">..</span> <span class="DecNumber">65535'u64</span><span class="Other">.</span><span class="Identifier">int</span><span class="Other">]</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L69"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L69" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TEvalMode">
<dt><pre><a href="vmdef.html#TEvalMode"><span class="Identifier">TEvalMode</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">emRepl</span><span class="Other">,</span>                   <span class="Comment">## evaluate because in REPL mode</span>
  <span class="Identifier">emConst</span><span class="Other">,</span>                  <span class="Comment">## evaluate for 'const' according to spec</span>
  <span class="Identifier">emOptimize</span><span class="Other">,</span>               <span class="Comment">## evaluate for optimization purposes (same as</span>
                             <span class="Comment">## emConst?)</span>
  <span class="Identifier">emStaticExpr</span><span class="Other">,</span>             <span class="Comment">## evaluate for enforced compile time eval</span>
                             <span class="Comment">## ('static' context)</span>
  <span class="Identifier">emStaticStmt</span><span class="Other">,</span>             <span class="Comment">## 'static' as an expression</span>
  <span class="Identifier">emStandalone</span>               <span class="Comment">## standalone execution separate from</span>
                             <span class="Comment">## code-generation</span></pre></dt>
<dd>

reason for evaluation
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L77"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L77" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TFullReg">
<dt><pre><a href="vmdef.html#TFullReg"><span class="Identifier">TFullReg</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Keyword">case</span> <span class="Identifier">kind</span><span class="Operator">*</span><span class="Other">:</span> <a href="vm_enums.html#TRegisterKind"><span class="Identifier">TRegisterKind</span></a>
  <span class="Keyword">of</span> <span class="Identifier">rkNone</span><span class="Other">:</span>
    <span class="Keyword">nil</span>
  <span class="Keyword">of</span> <span class="Identifier">rkInt</span><span class="Other">:</span>
    <span class="Identifier">intVal</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">BiggestInt</span>
  <span class="Keyword">of</span> <span class="Identifier">rkFloat</span><span class="Other">:</span>
    <span class="Identifier">floatVal</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">BiggestFloat</span>
  <span class="Keyword">of</span> <span class="Identifier">rkAddress</span><span class="Other">:</span>
      <span class="Identifier">addrVal</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#MemRegionPtr"><span class="Identifier">MemRegionPtr</span></a>
      <span class="Identifier">addrTyp</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a>

  <span class="Keyword">of</span> <span class="Identifier">rkLocation</span><span class="Other">,</span> <span class="Identifier">rkHandle</span><span class="Other">:</span>
      <span class="Identifier">handle</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#LocHandle"><span class="Identifier">LocHandle</span></a>

  <span class="Keyword">of</span> <span class="Identifier">rkNimNode</span><span class="Other">:</span>
      <span class="Identifier">nimNode</span><span class="Operator">*</span><span class="Other">:</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a>

  <span class="Keyword">of</span> <span class="Identifier">rkRegAddr</span><span class="Other">:</span>
      <span class="Identifier">regAddr</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">ptr</span> <a href="vmdef.html#TFullReg"><span class="Identifier">TFullReg</span></a>

  </pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L304"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L304" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TInstr">
<dt><pre><a href="vmdef.html#TInstr"><span class="Identifier">TInstr</span></a> <span class="Other">=</span> <span class="Keyword">distinct</span> <a href="vmdef.html#TInstrType"><span class="Identifier">TInstrType</span></a></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L70"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L70" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TInstrType">
<dt><pre><a href="vmdef.html#TInstrType"><span class="Identifier">TInstrType</span></a> <span class="Other">=</span> <span class="Identifier">uint64</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L37"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L37" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TPosition">
<dt><pre><a href="vmdef.html#TPosition"><span class="Identifier">TPosition</span></a> <span class="Other">=</span> <span class="Keyword">distinct</span> <span class="Identifier">int</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L599"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L599" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TRegister">
<dt><pre><a href="vmdef.html#TRegister"><span class="Identifier">TRegister</span></a> <span class="Other">=</span> <span class="Identifier">range</span><span class="Other">[</span><span class="DecNumber">0</span> <span class="Operator">..</span> <span class="DecNumber">65535'u64</span><span class="Other">.</span><span class="Identifier">int</span><span class="Other">]</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L68"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L68" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TSandboxFlag">
<dt><pre><a href="vmdef.html#TSandboxFlag"><span class="Identifier">TSandboxFlag</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">allowCast</span><span class="Other">,</span>                <span class="Comment">## allow unsafe language feature: 'cast'</span>
  <span class="Identifier">allowInfiniteLoops</span>         <span class="Comment">## allow endless loops</span></pre></dt>
<dd>

what the evaluation engine should allow
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L88"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L88" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TSandboxFlags">
<dt><pre><a href="vmdef.html#TSandboxFlags"><span class="Identifier">TSandboxFlags</span></a> <span class="Other">=</span> <span class="Identifier">set</span><span class="Other">[</span><a href="vmdef.html#TSandboxFlag"><span class="Identifier">TSandboxFlag</span></a><span class="Other">]</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L91"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L91" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TSlotKind">
<dt><pre><a href="vmdef.html#TSlotKind"><span class="Identifier">TSlotKind</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">slotEmpty</span><span class="Other">,</span>                <span class="Comment">## slot is unused</span>
  <span class="Identifier">slotFixedVar</span><span class="Other">,</span>             <span class="Comment">## slot is used for a fixed var/result (requires copy then)</span>
  <span class="Identifier">slotFixedLet</span><span class="Other">,</span>             <span class="Comment">## slot is used for a fixed param/let</span>
  <span class="Identifier">slotTempUnknown</span><span class="Other">,</span>          <span class="Comment">## slot but type unknown (argument of proc call)</span>
  <span class="Identifier">slotTempInt</span><span class="Other">,</span>              <span class="Comment">## some temporary int</span>
  <span class="Identifier">slotTempFloat</span><span class="Other">,</span>            <span class="Comment">## some temporary float</span>
  <span class="Identifier">slotTempStr</span><span class="Other">,</span>              <span class="Comment">## some temporary string</span>
  <span class="Identifier">slotTempComplex</span><span class="Other">,</span>          <span class="Comment">## some complex temporary (s.node field is used)</span>
  <span class="Identifier">slotTempHandle</span><span class="Other">,</span>           <span class="Comment">## some temporary handle into an object/array</span>
  <span class="Identifier">slotTempPerm</span>               <span class="Comment">## slot is temporary but permanent (hack)</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L93"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L93" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TStackFrame">
<dt><pre><a href="vmdef.html#TStackFrame"><span class="Identifier">TStackFrame</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">prc</span><span class="Operator">*</span><span class="Other">:</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a>
  <span class="Identifier">slots</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#TFullReg"><span class="Identifier">TFullReg</span></a><span class="Other">]</span>
  <span class="Identifier">next</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#StackFrameIndex"><span class="Identifier">StackFrameIndex</span></a>
  <span class="Identifier">comesFrom</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">safePoints</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">int</span><span class="Other">]</span>
</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L586"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L586" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TypeInfoCache">
<dt><pre><a href="vmdef.html#TypeInfoCache"><span class="Identifier">TypeInfoCache</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">lut</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">Table</span><span class="Other">[</span><a href="../ast/ast_types.html#ItemId"><span class="Identifier">ItemId</span></a><span class="Other">,</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a><span class="Other">]</span> <span class="Comment">## `PType`-id -&gt; `PVmType` mappings</span>
  <span class="Identifier">genericInsts</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">Table</span><span class="Other">[</span><a href="../ast/ast_types.html#ItemId"><span class="Identifier">ItemId</span></a><span class="Other">,</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Other">(</span><a href="../ast/ast_types.html#PType"><span class="Identifier">PType</span></a><span class="Other">,</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a><span class="Other">)</span><span class="Other">]</span><span class="Other">]</span> <span class="Comment">## </span>
                                                      <span class="Comment">## 'generic type' -&gt; 'known instantiations' mappings. Needed to make</span>
                                                      <span class="Comment">## sure that all same instantations map to the same VmType</span>
  <span class="Identifier">structs</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#TypeTable"><span class="Identifier">TypeTable</span></a>        <span class="Comment">## All structural types created by ``vmtypegen``</span>
  <span class="Identifier">signatures</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">Table</span><span class="Other">[</span><a href="vmdef.html#RoutineSig"><span class="Identifier">RoutineSig</span></a><span class="Other">,</span> <a href="vmdef.html#RoutineSigId"><span class="Identifier">RoutineSigId</span></a><span class="Other">]</span>
  <span class="Identifier">nextSigId</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#RoutineSigId"><span class="Identifier">RoutineSigId</span></a>   <span class="Comment">## The ID to use for a new `signatures` entry</span>
  <span class="Identifier">types</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a><span class="Other">]</span>       <span class="Comment">## all generated types (including those created</span>
                             <span class="Comment">## during VM setup)</span>
  <span class="Identifier">staticInfo</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">AtomKind</span><span class="Other">,</span> <span class="Keyword">tuple</span><span class="Other">[</span><span class="Identifier">size</span><span class="Other">,</span> <span class="Identifier">align</span><span class="Other">:</span> <span class="Identifier">uint8</span><span class="Other">]</span><span class="Other">]</span> <span class="Comment">## size and alignment information for atoms where this information is</span>
                                                          <span class="Comment">## the same for every instance</span>
  <span class="Identifier">boolType</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a>
  <span class="Identifier">charType</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a>
  <span class="Identifier">stringType</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a>
  <span class="Identifier">pointerType</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a>
  <span class="Identifier">nodeType</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a>
  <span class="Identifier">emptyType</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a>
  <span class="Identifier">intTypes</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">tyInt</span> <span class="Operator">..</span> <span class="Identifier">tyInt64</span><span class="Other">,</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a><span class="Other">]</span>
  <span class="Identifier">uintTypes</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">tyUInt</span> <span class="Operator">..</span> <span class="Identifier">tyUInt64</span><span class="Other">,</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a><span class="Other">]</span>
  <span class="Identifier">floatTypes</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">tyFloat</span> <span class="Operator">..</span> <span class="Identifier">tyFloat64</span><span class="Other">,</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a><span class="Other">]</span>
</pre></dt>
<dd>

An append-only cache for everything type related
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L441"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L441" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TypeTable">
<dt><pre><a href="vmdef.html#TypeTable"><span class="Identifier">TypeTable</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">data</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#TypeTableEntry"><span class="Identifier">TypeTableEntry</span></a><span class="Other">]</span>
  <span class="Identifier">counter</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
</pre></dt>
<dd>

A partial hash-table overlay for <tt class="docutils literal"><span class="pre"><span class="Identifier">TypeInfoCache</span><span class="Operator">.</span><span class="Identifier">types</span></span></tt>. Not all types present in the latter need to be present in the table
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L435"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L435" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="TypeTableEntry">
<dt><pre><a href="vmdef.html#TypeTableEntry"><span class="Identifier">TypeTableEntry</span></a> <span class="Other">=</span> <span class="Keyword">tuple</span><span class="Other">[</span><span class="Identifier">hcode</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">,</span> <span class="Identifier">typ</span><span class="Other">:</span> <a href="vmdef.html#VmTypeId"><span class="Identifier">VmTypeId</span></a><span class="Other">]</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L434"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L434" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="VmAllocator">
<dt><pre><a href="vmdef.html#VmAllocator"><span class="Identifier">VmAllocator</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">regions</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Keyword">tuple</span><span class="Other">[</span><span class="Identifier">typ</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a><span class="Other">,</span> <span class="Identifier">count</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">,</span> <span class="Identifier">start</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">,</span> <span class="Identifier">len</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">]</span>
  <span class="Identifier">byteType</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a>         <span class="Comment">## The VM type for `byte`</span>
  </pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L412"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L412" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="VmArgs">
<dt><pre><a href="vmdef.html#VmArgs"><span class="Identifier">VmArgs</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">ra</span><span class="Operator">*</span><span class="Other">,</span> <span class="Identifier">rb</span><span class="Operator">*</span><span class="Other">,</span> <span class="Identifier">rc</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">Natural</span>
  <span class="Identifier">slots</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">ptr</span> <span class="Identifier">UncheckedArray</span><span class="Other">[</span><a href="vmdef.html#TFullReg"><span class="Identifier">TFullReg</span></a><span class="Other">]</span>
  <span class="Identifier">currentException</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#HeapSlotHandle"><span class="Identifier">HeapSlotHandle</span></a>
  <span class="Identifier">currentLineInfo</span><span class="Operator">*</span><span class="Other">:</span> <a href="../ast/ast_types.html#TLineInfo"><span class="Identifier">TLineInfo</span></a>
  <span class="Identifier">typeCache</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">ptr</span> <a href="vmdef.html#TypeInfoCache"><span class="Identifier">TypeInfoCache</span></a>
  <span class="Identifier">mem</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">ptr</span> <a href="vmdef.html#VmMemoryManager"><span class="Identifier">VmMemoryManager</span></a>
  <span class="Identifier">heap</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">ptr</span> <a href="vmdef.html#VmHeap"><span class="Identifier">VmHeap</span></a>
</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L396"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L396" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="VmCallback">
<dt><pre><a href="vmdef.html#VmCallback"><span class="Identifier">VmCallback</span></a> <span class="Other">=</span> <span class="Keyword">proc</span> <span class="Other">(</span><span class="Identifier">args</span><span class="Other">:</span> <a href="vmdef.html#VmArgs"><span class="Identifier">VmArgs</span></a><span class="Other">)</span> {.<span class="Identifier">closure</span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L410"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L410" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="VmClosure">
<dt><pre><a href="vmdef.html#VmClosure"><span class="Identifier">VmClosure</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">fnc</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#VmFunctionPtr"><span class="Identifier">VmFunctionPtr</span></a>
  <span class="Identifier">env</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#HeapSlotHandle"><span class="Identifier">HeapSlotHandle</span></a>
</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L267"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L267" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="VmConstant">
<dt><pre><a href="vmdef.html#VmConstant"><span class="Identifier">VmConstant</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Keyword">case</span> <span class="Identifier">kind</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#ConstantKind"><span class="Identifier">ConstantKind</span></a>
  <span class="Keyword">of</span> <span class="Identifier">cnstInt</span><span class="Other">:</span>
      <span class="Identifier">intVal</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">BiggestInt</span>

  <span class="Keyword">of</span> <span class="Identifier">cnstFloat</span><span class="Other">:</span>
      <span class="Identifier">floatVal</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">BiggestFloat</span>

  <span class="Keyword">of</span> <span class="Identifier">cnstString</span><span class="Other">:</span>
      <span class="Identifier">strVal</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span>

  <span class="Keyword">of</span> <span class="Identifier">cnstNode</span><span class="Other">:</span>
      <span class="Identifier">node</span><span class="Operator">*</span><span class="Other">:</span> <a href="../ast/ast_types.html#PNode"><span class="Identifier">PNode</span></a>

  <span class="Keyword">of</span> <span class="Identifier">cnstSliceListInt</span><span class="Other">:</span>
      <span class="Identifier">intSlices</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">Slice</span><span class="Other">[</span><span class="Identifier">BiggestInt</span><span class="Other">]</span><span class="Other">]</span>

  <span class="Keyword">of</span> <span class="Identifier">cnstSliceListFloat</span><span class="Other">:</span>
      <span class="Identifier">floatSlices</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">Slice</span><span class="Other">[</span><span class="Identifier">BiggestFloat</span><span class="Other">]</span><span class="Other">]</span>

  <span class="Keyword">of</span> <span class="Identifier">cnstSliceListStr</span><span class="Other">:</span>
      <span class="Identifier">strSlices</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">Slice</span><span class="Other">[</span><a href="vmdef.html#ConstantId"><span class="Identifier">ConstantId</span></a><span class="Other">]</span><span class="Other">]</span> <span class="Comment">## Stores the ids of string constants</span>
                                         <span class="Comment">## as a storage optimization</span>
    
  </pre></dt>
<dd>

<tt class="docutils literal"><span class="pre"><span class="Identifier">VmConstant</span></span></tt>s are used for passing constant data from <tt class="docutils literal"><span class="pre"><span class="Identifier">vmgen</span></span></tt> to the execution engine. This includes constants for both internal use as well as user-defined literal values (e.g. string literals).
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L354"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L354" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="VmFunctionPtr">
<dt><pre><a href="vmdef.html#VmFunctionPtr"><span class="Identifier">VmFunctionPtr</span></a> <span class="Other">=</span> <span class="Keyword">distinct</span> <span class="Identifier">int</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L249"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L249" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="VmHeap">
<dt><pre><a href="vmdef.html#VmHeap"><span class="Identifier">VmHeap</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">slots</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#HeapSlot"><span class="Identifier">HeapSlot</span></a><span class="Other">]</span>
  <span class="Identifier">pending</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">int</span><span class="Other">]</span>         <span class="Comment">## the indices of the slots that are pending clean-up</span>
  </pre></dt>
<dd>

<p><tt class="docutils literal"><span class="pre"><span class="Identifier">VmHeap</span></span></tt> manages all ref-counted locations. These are used for <tt class="docutils literal"><span class="pre"><span class="Identifier">new</span></span></tt>'ed values as well as globals.</p>
<p>Once a slot's ref-count reaches zero, the slot is not cleaned up and freed immediately, but is added to the <tt class="docutils literal"><span class="pre"><span class="Identifier">pending</span></span></tt> list first. Pending slots are currently only freed at the end of a VM invocation, with cyclic references leading to memory leaks (no cycle detection is performed)</p>

&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L328"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L328" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="VmMemoryManager">
<dt><pre><a href="vmdef.html#VmMemoryManager"><span class="Identifier">VmMemoryManager</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">allocator</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#VmAllocator"><span class="Identifier">VmAllocator</span></a>
  <span class="Identifier">heap</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#VmHeap"><span class="Identifier">VmHeap</span></a>
</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L421"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L421" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="VmMemoryRegion">
<dt><pre><a href="vmdef.html#VmMemoryRegion"><span class="Identifier">VmMemoryRegion</span></a> <span class="Other">=</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">byte</span><span class="Other">]</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L277"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L277" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="VmSeq">
<dt><pre><a href="vmdef.html#VmSeq"><span class="Identifier">VmSeq</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">length</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">data</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#MemRegionPtr"><span class="Identifier">MemRegionPtr</span></a>
</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L284"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L284" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="VmString">
<dt><pre><a href="vmdef.html#VmString"><span class="Identifier">VmString</span></a> <span class="Other">=</span> <span class="Keyword">distinct</span> <a href="vmdef.html#VmSeq"><span class="Identifier">VmSeq</span></a></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L288"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L288" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="VmType">
<dt><pre><a href="vmdef.html#VmType"><span class="Identifier">VmType</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Keyword">case</span> <span class="Identifier">kind</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#AtomKind"><span class="Identifier">AtomKind</span></a>
  <span class="Keyword">of</span> <span class="Identifier">akInt</span><span class="Other">,</span> <span class="Identifier">akFloat</span><span class="Other">,</span> <span class="Identifier">akPNode</span><span class="Other">:</span>
    <span class="Keyword">nil</span>
  <span class="Keyword">of</span> <span class="Identifier">akPtr</span><span class="Other">,</span> <span class="Identifier">akRef</span><span class="Other">:</span>
      <span class="Identifier">targetType</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a>

  <span class="Keyword">of</span> <span class="Identifier">akSet</span><span class="Other">:</span>
      <span class="Identifier">setLength</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>        <span class="Comment">## The number of elements in the set</span>
    
  <span class="Keyword">of</span> <span class="Identifier">akSeq</span><span class="Other">,</span> <span class="Identifier">akString</span><span class="Other">:</span>
      <span class="Identifier">seqElemStride</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
      <span class="Identifier">seqElemType</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a>

  <span class="Keyword">of</span> <span class="Identifier">akCallable</span><span class="Other">,</span> <span class="Identifier">akClosure</span><span class="Other">:</span>
      <span class="Identifier">routineSig</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#RoutineSigId"><span class="Identifier">RoutineSigId</span></a>

  <span class="Keyword">of</span> <span class="Identifier">akDiscriminator</span><span class="Other">:</span>
      <span class="Identifier">numBits</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>          <span class="Comment">## The amount of bits the discriminator value occupies</span>
    
  <span class="Keyword">of</span> <span class="Identifier">akObject</span><span class="Other">:</span>
      <span class="Identifier">relFieldStart</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">uint32</span> <span class="Comment">## Encodes both the position (`PSym.position`) of</span>
                             <span class="Comment">## the first field as well as whether the object</span>
                             <span class="Comment">## has a base. If &gt; 0, the object has a base.</span>
                             <span class="Comment">## Subtracting 1 one from a `&gt; 0` value yields the</span>
                             <span class="Comment">## position</span>
      <span class="Identifier">objFields</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Keyword">tuple</span><span class="Other">[</span><span class="Identifier">offset</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">,</span> <span class="Identifier">typ</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a><span class="Other">]</span><span class="Other">]</span>
      <span class="Identifier">branches</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="vmdef.html#BranchListEntry"><span class="Identifier">BranchListEntry</span></a><span class="Other">]</span> <span class="Comment">## Empty if the object is no variant</span>
    
  <span class="Keyword">of</span> <span class="Identifier">akArray</span><span class="Other">:</span>
      <span class="Identifier">elementCount</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
      <span class="Identifier">elementStride</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
      <span class="Identifier">elementType</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a>

  <span class="Identifier">sizeInBytes</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">uint</span>
  <span class="Identifier">alignment</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">uint8</span>          <span class="Comment">## 1 shl `alignment` == real alignment value</span>
  </pre></dt>
<dd>

A <tt class="docutils literal"><span class="pre"><span class="Identifier">VmType</span></span></tt> is a concrete type, holding the information necessary to interpret the raw bytes of a location. <tt class="docutils literal"><span class="pre"><span class="Identifier">PType</span></span></tt>s are mapped to <tt class="docutils literal"><span class="pre"><span class="Identifier">VmType</span></span></tt>s in <tt class="docutils literal"><span class="pre"><span class="Identifier">vmtypegen</span></span></tt>.
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L187"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L187" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="VmTypeId">
<dt><pre><a href="vmdef.html#VmTypeId"><span class="Identifier">VmTypeId</span></a> <span class="Other">=</span> <span class="Identifier">uint32</span></pre></dt>
<dd>

The unique ID of a <tt class="docutils literal"><span class="pre"><span class="Identifier">VmType</span></span></tt>. Implementation-wise, it's an index into <tt class="docutils literal"><span class="pre"><span class="Identifier">TypeInfoCache</span><span class="Operator">.</span><span class="Identifier">types</span></span></tt>
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L140"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L140" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="VmTypeInfo">
<dt><pre><a href="vmdef.html#VmTypeInfo"><span class="Identifier">VmTypeInfo</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">internal</span><span class="Operator">*</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a>         <span class="Comment">## the `VmType` the type maps to</span>
  <span class="Identifier">nimType</span><span class="Operator">*</span><span class="Other">:</span> <a href="../ast/ast_types.html#PType"><span class="Identifier">PType</span></a>
</pre></dt>
<dd>

Stores run-time-type-information (RTTI) for types. Similiar to the <tt class="docutils literal"><span class="pre"><span class="Identifier">PNimType</span></span></tt> used by the other backends, with the difference that <tt class="docutils literal"><span class="pre"><span class="Identifier">VmTypeInfo</span></span></tt> is not exposed to user-code. Only used internally for implementing <tt class="docutils literal"><span class="pre"><span class="Identifier">repr</span></span></tt> (only when not compiling with <tt class="docutils literal"><span class="pre"><span class="Operator">--</span><span class="Identifier">newruntime</span></span></tt>; implied by <tt class="docutils literal"><span class="pre"><span class="Identifier">mm</span><span class="Punctuation">:</span><span class="Identifier">arc</span><span class="Operator">/</span><span class="Identifier">orc</span></span></tt>) and <tt class="docutils literal"><span class="pre"><span class="Identifier">opcConv</span></span></tt>
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L235"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L235" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="10">
<h1><a class="toc-backref" href="#10">Consts</a></h1>
<dl class="item">
<div id="byteExcess">
<dt><pre><a href="vmdef.html#byteExcess"><span class="Identifier">byteExcess</span></a> <span class="Other">=</span> <span class="DecNumber">128</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L46"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L46" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="nimNodeFlag">
<dt><pre><a href="vmdef.html#nimNodeFlag"><span class="Identifier">nimNodeFlag</span></a> <span class="Other">=</span> <span class="DecNumber">16</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L767"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L767" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="noneType">
<dt><pre><a href="vmdef.html#noneType"><span class="Identifier">noneType</span></a><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a> <span class="Other">=</span> <span class="Keyword">nil</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L791"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L791" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="pseudoAtomKinds">
<dt><pre><a href="vmdef.html#pseudoAtomKinds"><span class="Identifier">pseudoAtomKinds</span></a> <span class="Other">=</span> <span class="Other">{</span><span class="DecNumber">akObject</span><span class="Other">,</span> <span class="DecNumber">akArray</span><span class="Other">}</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L760"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L760" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="realAtomKinds">
<dt><pre><a href="vmdef.html#realAtomKinds"><span class="Identifier">realAtomKinds</span></a> <span class="Other">=</span> <span class="Other">{</span><span class="DecNumber">akInt</span><span class="Other">..</span><span class="DecNumber">akPNode</span><span class="Other">}</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L761"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L761" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regAMask">
<dt><pre><a href="vmdef.html#regAMask"><span class="Identifier">regAMask</span></a> <span class="Other">=</span> <span class="DecNumber">65535'u64</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L58"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L58" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regAShift">
<dt><pre><a href="vmdef.html#regAShift"><span class="Identifier">regAShift</span></a> <span class="Other">=</span> <span class="DecNumber">8'u64</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L52"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L52" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regBMask">
<dt><pre><a href="vmdef.html#regBMask"><span class="Identifier">regBMask</span></a> <span class="Other">=</span> <span class="DecNumber">65535'u64</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L59"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L59" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regBShift">
<dt><pre><a href="vmdef.html#regBShift"><span class="Identifier">regBShift</span></a> <span class="Other">=</span> <span class="DecNumber">24'u64</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L53"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L53" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regBxMask">
<dt><pre><a href="vmdef.html#regBxMask"><span class="Identifier">regBxMask</span></a> <span class="Other">=</span> <span class="DecNumber">16777215'u64</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L61"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L61" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regBxMax">
<dt><pre><a href="vmdef.html#regBxMax"><span class="Identifier">regBxMax</span></a> <span class="Other">=</span> <span class="DecNumber">8388607</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L65"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L65" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regBxMin">
<dt><pre><a href="vmdef.html#regBxMin"><span class="Identifier">regBxMin</span></a> <span class="Other">=</span> <span class="DecNumber">-8388607</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L64"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L64" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regBxShift">
<dt><pre><a href="vmdef.html#regBxShift"><span class="Identifier">regBxShift</span></a> <span class="Other">=</span> <span class="DecNumber">24'u64</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L55"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L55" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regCMask">
<dt><pre><a href="vmdef.html#regCMask"><span class="Identifier">regCMask</span></a> <span class="Other">=</span> <span class="DecNumber">65535'u64</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L60"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L60" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regCShift">
<dt><pre><a href="vmdef.html#regCShift"><span class="Identifier">regCShift</span></a> <span class="Other">=</span> <span class="DecNumber">40'u64</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L54"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L54" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regOMask">
<dt><pre><a href="vmdef.html#regOMask"><span class="Identifier">regOMask</span></a> <span class="Other">=</span> <span class="DecNumber">255'u64</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L57"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L57" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regOShift">
<dt><pre><a href="vmdef.html#regOShift"><span class="Identifier">regOShift</span></a> <span class="Other">=</span> <span class="DecNumber">0'u</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L51"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L51" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="slotSomeTemp">
<dt><pre><a href="vmdef.html#slotSomeTemp"><span class="Identifier">slotSomeTemp</span></a> <span class="Other">=</span> <span class="DecNumber">slotTempUnknown</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L764"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L764" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="wordExcess">
<dt><pre><a href="vmdef.html#wordExcess"><span class="Identifier">wordExcess</span></a> <span class="Other">=</span> <span class="DecNumber">8388608</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L63"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L63" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<div id="<=,FieldIndex,FieldIndex">
<dt><pre><span class="Keyword">func</span> <a href="#%3C%3D%2CFieldIndex%2CFieldIndex"><span class="Identifier">`&lt;=`</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">,</span> <span class="Identifier">b</span><span class="Other">:</span> <a href="vmdef.html#FieldIndex"><span class="Identifier">FieldIndex</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">borrow</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L604"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L604" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="<,FieldIndex,FieldIndex">
<dt><pre><span class="Keyword">func</span> <a href="#%3C%2CFieldIndex%2CFieldIndex"><span class="Identifier">`&lt;`</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">,</span> <span class="Identifier">b</span><span class="Other">:</span> <a href="vmdef.html#FieldIndex"><span class="Identifier">FieldIndex</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">borrow</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L603"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L603" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="==,FieldIndex,FieldIndex">
<dt><pre><span class="Keyword">func</span> <a href="#%3D%3D%2CFieldIndex%2CFieldIndex"><span class="Identifier">`==`</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">,</span> <span class="Identifier">b</span><span class="Other">:</span> <a href="vmdef.html#FieldIndex"><span class="Identifier">FieldIndex</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">borrow</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L605"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L605" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="==,FunctionIndex,FunctionIndex">
<dt><pre><span class="Keyword">func</span> <a href="#%3D%3D%2CFunctionIndex%2CFunctionIndex"><span class="Identifier">`==`</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">,</span> <span class="Identifier">b</span><span class="Other">:</span> <a href="vmdef.html#FunctionIndex"><span class="Identifier">FunctionIndex</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">borrow</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L611"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L611" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="==,RoutineSigId,RoutineSigId">
<dt><pre><span class="Keyword">func</span> <a href="#%3D%3D%2CRoutineSigId%2CRoutineSigId"><span class="Identifier">`==`</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">,</span> <span class="Identifier">b</span><span class="Other">:</span> <a href="vmdef.html#RoutineSigId"><span class="Identifier">RoutineSigId</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">borrow</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L715"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L715" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="data,VmString">
<dt><pre><span class="Keyword">func</span> <a href="#data%2CVmString"><span class="Identifier">data</span></a><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="vmdef.html#VmString"><span class="Identifier">VmString</span></a><span class="Other">)</span><span class="Other">:</span> <a href="vmdef.html#MemRegionPtr"><span class="Identifier">MemRegionPtr</span></a> {.<span class="Identifier">inline</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L815"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L815" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="init,TypeInfoCache">
<dt><pre><span class="Keyword">proc</span> <a href="#init%2CTypeInfoCache"><span class="Identifier">init</span></a><span class="Other">(</span><span class="Identifier">cache</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="vmdef.html#TypeInfoCache"><span class="Identifier">TypeInfoCache</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L632"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L632" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="len,VmString">
<dt><pre><span class="Keyword">func</span> <a href="#len%2CVmString"><span class="Identifier">len</span></a><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="vmdef.html#VmString"><span class="Identifier">VmString</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span class="Identifier">inline</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L813"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L813" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="makeLocHandle,pointer,PVmType">
<dt><pre><span class="Keyword">func</span> <a href="#makeLocHandle%2Cpointer%2CPVmType"><span class="Identifier">makeLocHandle</span></a><span class="Other">(</span><span class="Identifier">h</span><span class="Other">:</span> <span class="Identifier">pointer</span><span class="Other">;</span> <span class="Identifier">typ</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a><span class="Other">)</span><span class="Other">:</span> <a href="vmdef.html#LocHandle"><span class="Identifier">LocHandle</span></a> {.<span class="Identifier">inline</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L785"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L785" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="makeLocHandle,MemRegionPtr,PVmType">
<dt><pre><span class="Keyword">func</span> <a href="#makeLocHandle%2CMemRegionPtr%2CPVmType"><span class="Identifier">makeLocHandle</span></a><span class="Other">(</span><span class="Identifier">p</span><span class="Other">:</span> <a href="vmdef.html#MemRegionPtr"><span class="Identifier">MemRegionPtr</span></a><span class="Other">;</span> <span class="Identifier">typ</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a><span class="Other">)</span><span class="Other">:</span> <a href="vmdef.html#LocHandle"><span class="Identifier">LocHandle</span></a> {.<span class="Identifier">inline</span><span class="Other">,</span>
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L780"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L780" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="makeMemPtr,pointer,uint">
<dt><pre><span class="Keyword">func</span> <a href="#makeMemPtr%2Cpointer%2Cuint"><span class="Identifier">makeMemPtr</span></a><span class="Other">(</span><span class="Identifier">p</span><span class="Other">:</span> <span class="Identifier">pointer</span><span class="Other">;</span> <span class="Identifier">sizeInBytes</span><span class="Other">:</span> <span class="Identifier">uint</span><span class="Other">)</span><span class="Other">:</span> <a href="vmdef.html#MemRegionPtr"><span class="Identifier">MemRegionPtr</span></a> {.<span class="Identifier">inline</span><span class="Other">,</span>
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L777"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L777" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="newCtx,PSym,IdentCache,ModuleGraph,IdGenerator">
<dt><pre><span class="Keyword">proc</span> <a href="#newCtx%2CPSym%2CIdentCache%2CModuleGraph%2CIdGenerator"><span class="Identifier">newCtx</span></a><span class="Other">(</span><span class="Identifier">module</span><span class="Other">:</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a><span class="Other">;</span> <span class="Identifier">cache</span><span class="Other">:</span> <a href="../ast/idents.html#IdentCache"><span class="Identifier">IdentCache</span></a><span class="Other">;</span> <span class="Identifier">g</span><span class="Other">:</span> <a href="../modules/modulegraphs.html#ModuleGraph"><span class="Identifier">ModuleGraph</span></a><span class="Other">;</span> <span class="Identifier">idgen</span><span class="Other">:</span> <a href="../ast/ast_idgen.html#IdGenerator"><span class="Identifier">IdGenerator</span></a><span class="Other">)</span><span class="Other">:</span> <a href="vmdef.html#PCtx"><span class="Identifier">PCtx</span></a> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L717"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L717" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="newVmString,MemRegionPtr,Natural">
<dt><pre><span class="Keyword">func</span> <a href="#newVmString%2CMemRegionPtr%2CNatural"><span class="Identifier">newVmString</span></a><span class="Other">(</span><span class="Identifier">data</span><span class="Other">:</span> <a href="vmdef.html#MemRegionPtr"><span class="Identifier">MemRegionPtr</span></a><span class="Other">;</span> <span class="Identifier">len</span><span class="Other">:</span> <span class="Identifier">Natural</span><span class="Other">)</span><span class="Other">:</span> <a href="vmdef.html#VmString"><span class="Identifier">VmString</span></a> {.<span class="Identifier">inline</span><span class="Other">,</span>
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L810"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L810" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="overlap,int,int,Natural,Natural">
<dt><pre><span class="Keyword">func</span> <a href="#overlap%2Cint%2Cint%2CNatural%2CNatural"><span class="Identifier">overlap</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">,</span> <span class="Identifier">b</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">aLen</span><span class="Other">,</span> <span class="Identifier">bLen</span><span class="Other">:</span> <span class="Identifier">Natural</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Tests if the ranges <tt class="docutils literal"><span class="pre"><span class="Punctuation">[</span><span class="Identifier">a</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Operator">+</span><span class="Identifier">aLen</span><span class="Punctuation">)</span></span></tt> and <tt class="docutils literal"><span class="pre"><span class="Punctuation">[</span><span class="Identifier">b</span><span class="Punctuation">,</span> <span class="Identifier">b</span><span class="Operator">+</span><span class="Identifier">bLen</span><span class="Punctuation">)</span></span></tt> have elements in common
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L824"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L824" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="overlap,pointer,pointer,Natural,Natural">
<dt><pre><span class="Keyword">func</span> <a href="#overlap%2Cpointer%2Cpointer%2CNatural%2CNatural"><span class="Identifier">overlap</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">,</span> <span class="Identifier">b</span><span class="Other">:</span> <span class="Identifier">pointer</span><span class="Other">;</span> <span class="Identifier">aLen</span><span class="Other">,</span> <span class="Identifier">bLen</span><span class="Other">:</span> <span class="Identifier">Natural</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Test if the memory regions overlap
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L834"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L834" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="refresh,TCtx,PSym,IdGenerator">
<dt><pre><span class="Keyword">func</span> <a href="#refresh%2CTCtx%2CPSym%2CIdGenerator"><span class="Identifier">refresh</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="vmdef.html#TCtx"><span class="Identifier">TCtx</span></a><span class="Other">;</span> <span class="Identifier">module</span><span class="Other">:</span> <a href="../ast/ast_types.html#PSym"><span class="Identifier">PSym</span></a><span class="Other">;</span> <span class="Identifier">idgen</span><span class="Other">:</span> <a href="../ast/ast_idgen.html#IdGenerator"><span class="Identifier">IdGenerator</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L741"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L741" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="registerCallback,TCtx,string,VmCallback">
<dt><pre><span class="Keyword">proc</span> <a href="#registerCallback%2CTCtx%2Cstring%2CVmCallback"><span class="Identifier">registerCallback</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="vmdef.html#TCtx"><span class="Identifier">TCtx</span></a><span class="Other">;</span> <span class="Identifier">name</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">callback</span><span class="Other">:</span> <a href="vmdef.html#VmCallback"><span class="Identifier">VmCallback</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.
    <span class="Identifier">discardable</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L748"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L748" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="safeCopyMem,openArray[],openArray[],Natural">
<dt><pre><span class="Keyword">func</span> <a href="#safeCopyMem%2CopenArray%5B%5D%2CopenArray%5B%5D%2CNatural"><span class="Identifier">safeCopyMem</span></a><span class="Other">(</span><span class="Identifier">dest</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">byte</span> <span class="Operator">|</span> <span class="Identifier">char</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">src</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">byte</span> <span class="Operator">|</span> <span class="Identifier">char</span><span class="Other">]</span><span class="Other">;</span>
                 <span class="Identifier">numBytes</span><span class="Other">:</span> <span class="Identifier">Natural</span><span class="Other">)</span> {.<span class="Identifier">inline</span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L856"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L856" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="safeCopyMemSrc,openArray[byte],openArray[byte]">
<dt><pre><span class="Keyword">func</span> <a href="#safeCopyMemSrc%2CopenArray%5Bbyte%5D%2CopenArray%5Bbyte%5D"><span class="Identifier">safeCopyMemSrc</span></a><span class="Other">(</span><span class="Identifier">dest</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">byte</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">src</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">byte</span><span class="Other">]</span><span class="Other">)</span> {.<span class="Identifier">inline</span><span class="Other">,</span>
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L865"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L865" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="safeZeroMem,openArray[byte],Natural">
<dt><pre><span class="Keyword">func</span> <a href="#safeZeroMem%2CopenArray%5Bbyte%5D%2CNatural"><span class="Identifier">safeZeroMem</span></a><span class="Other">(</span><span class="Identifier">dest</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">byte</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">numBytes</span><span class="Other">:</span> <span class="Identifier">Natural</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L872"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L872" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="toFuncIndex,VmFunctionPtr">
<dt><pre><span class="Keyword">func</span> <a href="#toFuncIndex%2CVmFunctionPtr"><span class="Identifier">toFuncIndex</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <a href="vmdef.html#VmFunctionPtr"><span class="Identifier">VmFunctionPtr</span></a><span class="Other">)</span><span class="Other">:</span> <a href="vmdef.html#FunctionIndex"><span class="Identifier">FunctionIndex</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L709"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L709" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="toFuncPtr,FunctionIndex">
<dt><pre><span class="Keyword">func</span> <a href="#toFuncPtr%2CFunctionIndex"><span class="Identifier">toFuncPtr</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <a href="vmdef.html#FunctionIndex"><span class="Identifier">FunctionIndex</span></a><span class="Other">)</span><span class="Other">:</span> <a href="vmdef.html#VmFunctionPtr"><span class="Identifier">VmFunctionPtr</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L706"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L706" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="18">
<h1><a class="toc-backref" href="#18">Templates</a></h1>
<dl class="item">
<div id="-.t,FieldIndex,int">
<dt><pre><span class="Keyword">template</span> <a href="#-.t%2CFieldIndex%2Cint"><span class="Identifier">`-`</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">:</span> <a href="vmdef.html#FieldIndex"><span class="Identifier">FieldIndex</span></a><span class="Other">;</span> <span class="Identifier">b</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <a href="vmdef.html#FieldIndex"><span class="Identifier">FieldIndex</span></a></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L606"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L606" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="allocator.t,TCtx">
<dt><pre><span class="Keyword">template</span> <a href="#allocator.t%2CTCtx"><span class="Identifier">allocator</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <a href="vmdef.html#TCtx"><span class="Identifier">TCtx</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L625"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L625" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="byteView.t,MemRegionPtr">
<dt><pre><span class="Keyword">template</span> <a href="#byteView.t%2CMemRegionPtr"><span class="Identifier">byteView</span></a><span class="Other">(</span><span class="Identifier">h</span><span class="Other">:</span> <a href="vmdef.html#MemRegionPtr"><span class="Identifier">MemRegionPtr</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L803"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L803" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="fieldAt.t,PVmType,FieldIndex">
<dt><pre><span class="Keyword">template</span> <a href="#fieldAt.t%2CPVmType%2CFieldIndex"><span class="Identifier">fieldAt</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a><span class="Other">;</span> <span class="Identifier">i</span><span class="Other">:</span> <a href="vmdef.html#FieldIndex"><span class="Identifier">FieldIndex</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L616"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L616" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="fieldAt.t,VmType,FieldIndex">
<dt><pre><span class="Keyword">template</span> <a href="#fieldAt.t%2CVmType%2CFieldIndex"><span class="Identifier">fieldAt</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <a href="vmdef.html#VmType"><span class="Identifier">VmType</span></a><span class="Other">;</span> <span class="Identifier">i</span><span class="Other">:</span> <a href="vmdef.html#FieldIndex"><span class="Identifier">FieldIndex</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L613"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L613" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="fpos.t,int">
<dt><pre><span class="Keyword">template</span> <a href="#fpos.t%2Cint"><span class="Identifier">fpos</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <a href="vmdef.html#FieldPosition"><span class="Identifier">FieldPosition</span></a></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L619"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L619" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="heap.t,TCtx">
<dt><pre><span class="Keyword">template</span> <a href="#heap.t%2CTCtx"><span class="Identifier">heap</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <a href="vmdef.html#TCtx"><span class="Identifier">TCtx</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L622"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L622" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="invalidLocHandle.t">
<dt><pre><span class="Keyword">template</span> <a href="#invalidLocHandle.t"><span class="Identifier">invalidLocHandle</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L794"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L794" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="isNil.t,HeapSlotHandle">
<dt><pre><span class="Keyword">template</span> <a href="#isNil.t%2CHeapSlotHandle"><span class="Identifier">isNil</span></a><span class="Other">(</span><span class="Identifier">h</span><span class="Other">:</span> <a href="vmdef.html#HeapSlotHandle"><span class="Identifier">HeapSlotHandle</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L789"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L789" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="isNil.t,MemRegionPtr">
<dt><pre><span class="Keyword">template</span> <a href="#isNil.t%2CMemRegionPtr"><span class="Identifier">isNil</span></a><span class="Other">(</span><span class="Identifier">h</span><span class="Other">:</span> <a href="vmdef.html#MemRegionPtr"><span class="Identifier">MemRegionPtr</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L788"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L788" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="isNil.t,VmFunctionPtr">
<dt><pre><span class="Keyword">template</span> <a href="#isNil.t%2CVmFunctionPtr"><span class="Identifier">isNil</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <a href="vmdef.html#VmFunctionPtr"><span class="Identifier">VmFunctionPtr</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L713"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L713" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="isValid.t,MemRegionPtr,uint">
<dt><pre><span class="Keyword">template</span> <a href="#isValid.t%2CMemRegionPtr%2Cuint"><span class="Identifier">isValid</span></a><span class="Other">(</span><span class="Identifier">h</span><span class="Other">:</span> <a href="vmdef.html#MemRegionPtr"><span class="Identifier">MemRegionPtr</span></a><span class="Other">;</span> <span class="Identifier">len</span><span class="Other">:</span> <span class="Identifier">uint</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L818"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L818" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="isValid.t,LocHandle">
<dt><pre><span class="Keyword">template</span> <a href="#isValid.t%2CLocHandle"><span class="Identifier">isValid</span></a><span class="Other">(</span><span class="Identifier">handle</span><span class="Other">:</span> <a href="vmdef.html#LocHandle"><span class="Identifier">LocHandle</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L819"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L819" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="isValid.t,PVmType">
<dt><pre><span class="Keyword">template</span> <a href="#isValid.t%2CPVmType"><span class="Identifier">isValid</span></a><span class="Other">(</span><span class="Identifier">t</span><span class="Other">:</span> <a href="vmdef.html#PVmType"><span class="Identifier">PVmType</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L796"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L796" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="jmpDiff.t,TInstr">
<dt><pre><span class="Keyword">template</span> <a href="#jmpDiff.t%2CTInstr"><span class="Identifier">jmpDiff</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <a href="vmdef.html#TInstr"><span class="Identifier">TInstr</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L775"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L775" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="len.t,MemRegionPtr">
<dt><pre><span class="Keyword">template</span> <a href="#len.t%2CMemRegionPtr"><span class="Identifier">len</span></a><span class="Other">(</span><span class="Identifier">h</span><span class="Other">:</span> <a href="vmdef.html#MemRegionPtr"><span class="Identifier">MemRegionPtr</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L801"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L801" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="nilMemPtr.t">
<dt><pre><span class="Keyword">template</span> <a href="#nilMemPtr.t"><span class="Identifier">nilMemPtr</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L793"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L793" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="opcode.t,TInstr">
<dt><pre><span class="Keyword">template</span> <a href="#opcode.t%2CTInstr"><span class="Identifier">opcode</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <a href="vmdef.html#TInstr"><span class="Identifier">TInstr</span></a><span class="Other">)</span><span class="Other">:</span> <a href="vm_enums.html#TOpcode"><span class="Identifier">TOpcode</span></a></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L769"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L769" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="rawPointer.t,MemRegionPtr">
<dt><pre><span class="Keyword">template</span> <a href="#rawPointer.t%2CMemRegionPtr"><span class="Identifier">rawPointer</span></a><span class="Other">(</span><span class="Identifier">h</span><span class="Other">:</span> <a href="vmdef.html#MemRegionPtr"><span class="Identifier">MemRegionPtr</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L798"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L798" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regA.t,TInstr">
<dt><pre><span class="Keyword">template</span> <a href="#regA.t%2CTInstr"><span class="Identifier">regA</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <a href="vmdef.html#TInstr"><span class="Identifier">TInstr</span></a><span class="Other">)</span><span class="Other">:</span> <a href="vmdef.html#TRegister"><span class="Identifier">TRegister</span></a></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L770"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L770" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regB.t,TInstr">
<dt><pre><span class="Keyword">template</span> <a href="#regB.t%2CTInstr"><span class="Identifier">regB</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <a href="vmdef.html#TInstr"><span class="Identifier">TInstr</span></a><span class="Other">)</span><span class="Other">:</span> <a href="vmdef.html#TRegister"><span class="Identifier">TRegister</span></a></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L771"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L771" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regBx.t,TInstr">
<dt><pre><span class="Keyword">template</span> <a href="#regBx.t%2CTInstr"><span class="Identifier">regBx</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <a href="vmdef.html#TInstr"><span class="Identifier">TInstr</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L773"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L773" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="regC.t,TInstr">
<dt><pre><span class="Keyword">template</span> <a href="#regC.t%2CTInstr"><span class="Identifier">regC</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <a href="vmdef.html#TInstr"><span class="Identifier">TInstr</span></a><span class="Other">)</span><span class="Other">:</span> <a href="vmdef.html#TRegister"><span class="Identifier">TRegister</span></a></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L772"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L772" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="registerCallback.t,PCtx,string,VmCallback">
<dt><pre><span class="Keyword">template</span> <a href="#registerCallback.t%2CPCtx%2Cstring%2CVmCallback"><span class="Identifier">registerCallback</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <a href="vmdef.html#PCtx"><span class="Identifier">PCtx</span></a><span class="Other">;</span> <span class="Identifier">name</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">callback</span><span class="Other">:</span> <a href="vmdef.html#VmCallback"><span class="Identifier">VmCallback</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">deprecated</span></span>.}</pre></dt>
<dd>
  <div class="deprecation-message">
    <b>Deprecated</b> 
  </div>

A transition helper. Use the <tt class="docutils literal"><span class="pre"><span class="Identifier">registerCallback</span></span></tt> proc that takes <tt class="docutils literal"><span class="pre"><span class="Keyword">var</span> <span class="Identifier">TCtx</span></span></tt> instead
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L754"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L754" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="subView.t,openArray[T],,">
<dt><pre><span class="Keyword">template</span> <a href="#subView.t%2CopenArray%5BT%5D%2C%2C"><span class="Identifier">subView</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">off</span><span class="Other">,</span> <span class="Identifier">len</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L806"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L806" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="types.t,TCtx">
<dt><pre><span class="Keyword">template</span> <a href="#types.t%2CTCtx"><span class="Identifier">types</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <a href="vmdef.html#TCtx"><span class="Identifier">TCtx</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

Transition helper
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L628"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L628" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="unreachable.t">
<dt><pre><span class="Keyword">template</span> <a href="#unreachable.t"><span class="Identifier">unreachable</span></a><span class="Other">(</span><span class="Other">)</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L897"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L897" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="unreachable.t_2">
<dt><pre><span class="Keyword">template</span> <a href="#unreachable.t_2"><span class="Identifier">unreachable</span></a><span class="Other">(</span><span class="Identifier">e</span><span class="Other">:</span> <span class="Keyword">enum</span><span class="Other">)</span></pre></dt>
<dd>

More efficient than <tt class="docutils literal"><span class="pre"><span class="Identifier">unreachable</span><span class="Punctuation">(</span><span class="Operator">$</span><span class="Identifier">e</span><span class="Punctuation">)</span></span></tt>. See <tt class="docutils literal"><span class="pre"><span class="Identifier">unreachableImpl</span></span></tt> for more info
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L903"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L903" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="unreachable.t,string">
<dt><pre><span class="Keyword">template</span> <a href="#unreachable.t%2Cstring"><span class="Identifier">unreachable</span></a><span class="Other">(</span><span class="Identifier">msg</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/104f004ec4a7fd0998f434dbd6bad07ef6fc9788/compiler/vm/vmdef.nim#L900"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/vm/vmdef.nim#L900" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="19">
<h1><a class="toc-backref" href="#19">Exports</a></h1>
<dl class="item">
<a href="vm_enums.html#largeInstrs"><span class="Identifier">largeInstrs</span></a>, <a href="vm_enums.html#relativeJumps"><span class="Identifier">relativeJumps</span></a>, <a href="vm_enums.html#TRegisterKind"><span class="Identifier">TRegisterKind</span></a>, <a href="vm_enums.html#firstABxInstr"><span class="Identifier">firstABxInstr</span></a>, <a href="vm_enums.html#AccessViolationReason"><span class="Identifier">AccessViolationReason</span></a>, <a href="vm_enums.html#TOpcode"><span class="Identifier">TOpcode</span></a>
</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2022-09-15 00:00:00 UTC</small>
      </div>
    </div>
  </div>
</div>
</body>
</html>
